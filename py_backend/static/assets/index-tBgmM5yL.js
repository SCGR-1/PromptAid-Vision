const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-XJUuvkAi.js","assets/index-Dym8TuvV.js","assets/index-BYJiCH1e.css"])))=>i.map(i=>d[i]);
import{j as t,z as b,n as w,v as Oe,w as Me,x as Le,B as Re,r as c,D as Je,N as ze,_ as fe,L as We,F as Ue,G as Ae}from"./index-Dym8TuvV.js";import{u as Be}from"./useAdmin-DnFl9FMw.js";import{F as He,E as Ve}from"./ExportModal-Bq4gp-iF.js";const Ge="_paginatorContainer_1l5ti_1",Ze="_paginationControls_1l5ti_19",he={paginatorContainer:Ge,paginationControls:Ze};function qe({currentPage:N,totalPages:f,onPageChange:$,className:H=""}){if(f<=1)return null;const h=(()=>{const y=[];if(f<=5)for(let x=1;x<=f;x++)y.push(x);else{let x=Math.max(1,N-2);const S=Math.min(f,x+5-1);S===f&&(x=Math.max(1,S-5+1));for(let T=x;T<=S;T++)y.push(T)}return y})();return t.jsx("div",{className:`${he.paginatorContainer} ${H}`,children:t.jsxs("div",{className:he.paginationControls,children:[t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsxs(w,{name:"prev-page",variant:"tertiary",size:1,onClick:()=>$(Math.max(1,N-1)),disabled:N===1,title:"Previous page",children:[t.jsx(Oe,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Previous"})]})}),t.jsxs("div",{className:"flex items-center gap-1",children:[h[0]>1&&t.jsxs(t.Fragment,{children:[t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsx(w,{name:"page-1",variant:"tertiary",size:1,onClick:()=>$(1),children:"1"})}),h[0]>2&&t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsx("span",{className:"px-2 text-gray-500",children:"..."})})]}),h.map(y=>t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsx(w,{name:`page-${y}`,variant:N===y?"primary":"tertiary",size:1,onClick:()=>$(y),children:y})},y)),h[h.length-1]<f&&t.jsxs(t.Fragment,{children:[h[h.length-1]<f-1&&t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsx("span",{className:"px-2 text-gray-500",children:"..."})}),t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsx(w,{name:`page-${f}`,variant:"tertiary",size:1,onClick:()=>$(f),children:f})})]})]}),t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsxs(w,{name:"next-page",variant:"tertiary",size:1,onClick:()=>$(Math.min(f,N+1)),disabled:N===f,title:"Next page",children:[t.jsx("span",{className:"hidden sm:inline",children:"Next"}),t.jsx(Me,{className:"w-4 h-4"})]})})]})})}const Ke="_tabSelector_o9y1f_1",Qe="_metadataTags_o9y1f_8",Xe="_metadataTag_o9y1f_8",Ye="_metadataTagSource_o9y1f_32",et="_metadataTagType_o9y1f_43",tt="_mapItem_o9y1f_54",at="_mapItemImage_o9y1f_72",st="_mapItemContent_o9y1f_92",it="_mapItemTitle_o9y1f_97",nt="_mapItemMetadata_o9y1f_105",lt="_fullSizeModalOverlay_o9y1f_134",rt="_fullSizeModalContent_o9y1f_148",ot="_ratingWarningContent_o9y1f_159",ct="_ratingWarningTitle_o9y1f_165",dt="_ratingWarningText_o9y1f_172",mt="_ratingWarningButtons_o9y1f_179",p={tabSelector:Ke,metadataTags:Qe,metadataTag:Xe,metadataTagSource:Ye,metadataTagType:et,mapItem:tt,mapItemImage:at,mapItemContent:st,mapItemTitle:it,mapItemMetadata:nt,fullSizeModalOverlay:lt,fullSizeModalContent:rt,ratingWarningContent:ot,ratingWarningTitle:ct,ratingWarningText:dt,ratingWarningButtons:mt};function ft(){const N=Le(),f=Re(),{isAuthenticated:$}=Be(),[H,ne]=c.useState("explore"),[h,y]=c.useState([]),{search:F,srcFilter:x,catFilter:S,regionFilter:T,countryFilter:L,imageTypeFilter:R,uploadTypeFilter:J,generatedMethodFilter:I,showReferenceExamples:E,setShowReferenceExamples:xe}=Je(),[K,_e]=c.useState([]),[Q,ye]=c.useState([]),[le,je]=c.useState([]),[Ne,ve]=c.useState([]),[re,be]=c.useState([]),[we,oe]=c.useState(!0),[z,ce]=c.useState(!0),[Se,X]=c.useState(!1),[Te,Y]=c.useState(!1),[Ie,ee]=c.useState(!1),[te,ae]=c.useState(null),[Ee,V]=c.useState(!1),[G,de]=c.useState(""),[se,me]=c.useState(!1),[W,ge]=c.useState(1),[C]=c.useState(10),[Z,pe]=c.useState(0),[Ce,ue]=c.useState(0),$e=[{key:"explore",label:"List"},{key:"mapDetails",label:"Carousel"}],U=c.useCallback(()=>{ce(!0),ae(null);const e=100,s=1,l=new URLSearchParams({page:s.toString(),limit:e.toString(),include_count:"true"});F&&l.append("search",F),x&&l.append("source",x),S&&l.append("event_type",S),T&&l.append("region",T),L&&l.append("country",L),R&&l.append("image_type",R),J&&l.append("upload_type",J),E&&l.append("starred_only","true"),fetch(`/api/images/grouped?${l.toString()}`).then(o=>{if(!o.ok)throw new Error(`Failed to fetch images: ${o.status} ${o.statusText}`);return o.json()}).then(o=>{console.log("ExplorePage: Fetched captions:",{data:o,fetchPage:s,fetchLimit:e,currentPage:W,itemsPerPage:C,generatedMethodFilter:I});let m=[],_=0;if(o.items&&typeof o.total_count=="number")m=o.items,_=m.length;else if(Array.isArray(o))m=o,_=o.length;else throw new Error("Unexpected response format");if(console.log("ExplorePage: After parsing response:",{itemsCount:m.length,totalCount:_,generatedMethodFilter:I,backendTotalCount:o.items?o.total_count:"N/A"}),I){const P=m.length;m=m.filter(q=>I==="manual"?q.model==="manual":I==="generated"?q.model!=="manual":!0),_=m.length,console.log("ExplorePage: After client-side filtering:",{beforeFilterCount:P,afterFilterCount:m.length})}const A=(W-1)*C,B=A+C;m=m.slice(A,B),console.log("ExplorePage: After client-side pagination:",{startIndex:A,endIndex:B,finalItemsCount:m.length,currentPage:W,itemsPerPage:C,totalCount:_,totalPages:Math.ceil(_/C)}),y(m),pe(_),ue(Math.ceil(_/C)),ae(null)}).catch(o=>{console.error("ExplorePage: Error fetching captions:",o),ae(o instanceof Error?o.message:"Failed to load images. Please try again later."),y([]),pe(0),ue(0)}).finally(()=>{ce(!1)})},[W,F,x,S,T,L,R,J,I,E,C]);c.useEffect(()=>{U()},[U]),c.useEffect(()=>{ge(1)},[F,x,S,T,L,R,J,I,E]),c.useEffect(()=>{const e=()=>{document.hidden||U()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[U]),c.useEffect(()=>{new URLSearchParams(f.search).get("export")==="true"&&(X(!0),N("/explore",{replace:!0}))},[f.search,N,F,x,S,T,L,R,I,E]),c.useEffect(()=>{oe(!0),Promise.all([fetch("/api/sources").then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()}),fetch("/api/types").then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()}),fetch("/api/regions").then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()}),fetch("/api/countries").then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()}),fetch("/api/image-types").then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()})]).then(([e,s,l,o,m])=>{_e(e),ye(s),je(l),ve(o),be(m)}).catch(()=>{}).finally(()=>{oe(!1)})},[]);const k=h,Fe=async(e,s="fine-tuning")=>{if(e.length===0){alert("No images to export");return}Y(!0),ee(!1);try{const l=(await Ae(async()=>{const{default:i}=await import("./jszip.min-XJUuvkAi.js").then(D=>D.j);return{default:i}},__vite__mapDeps([0,1,2]))).default,o=new l,m=e.filter(i=>i.image_type==="crisis_map"),_=e.filter(i=>i.image_type==="drone_image");if(m.length>0){const i=o.folder("crisis_maps_dataset"),D=i?.folder("images");if(D){let O=1;for(const a of m)try{const v=a.image_count&&a.image_count>1?a.all_image_ids||[a.image_id]:[a.image_id],ie=v.map(async(n,j)=>{try{const r=await fetch(`/api/images/${n}/file`);if(!r.ok)throw new Error(`Failed to fetch image ${n}`);const d=await r.blob(),g=a.file_key.split(".").pop()||"jpg",u=`${String(O).padStart(4,"0")}_${String(j+1).padStart(2,"0")}.${g}`;return D.file(u,d),{success:!0,fileName:u,imageId:n}}catch(r){return console.error(`Failed to process image ${n}:`,r),{success:!1,fileName:"",imageId:n}}}),M=(await Promise.all(ie)).filter(n=>n.success);if(M.length>0){if(s==="fine-tuning"){const n=M.map(d=>`images/${d.fileName}`),j=Math.random(),r={image:n.length===1?n[0]:n,caption:a.edited||a.generated||"",metadata:{image_id:v,title:a.title,source:a.source,event_type:a.event_type,image_type:a.image_type,countries:a.countries,starred:a.starred,image_count:a.image_count||1}};if(!i)continue;if(j<.8){const d=i.file("train.jsonl");if(d){const g=await d.async("string").then(u=>JSON.parse(u||"[]")).catch(()=>[]);g.push(r),i.file("train.jsonl",JSON.stringify(g,null,2))}else i.file("train.jsonl",JSON.stringify([r],null,2))}else if(j<.9){const d=i.file("test.jsonl");if(d){const g=await d.async("string").then(u=>JSON.parse(u||"[]")).catch(()=>[]);g.push(r),i.file("test.jsonl",JSON.stringify(g,null,2))}else i.file("test.jsonl",JSON.stringify([r],null,2))}else{const d=i.file("val.jsonl");if(d){const g=await d.async("string").then(u=>JSON.parse(u||"[]")).catch(()=>[]);g.push(r),i.file("val.jsonl",JSON.stringify(g,null,2))}else i.file("val.jsonl",JSON.stringify([r],null,2))}}else{const n=M.map(r=>`images/${r.fileName}`),j={image:n.length===1?n[0]:n,caption:a.edited||a.generated||"",metadata:{image_id:v,title:a.title,source:a.source,event_type:a.event_type,image_type:a.image_type,countries:a.countries,starred:a.starred,image_count:a.image_count||1}};i&&i.file(`${String(O).padStart(4,"0")}.json`,JSON.stringify(j,null,2))}O++}}catch(v){console.error(`Failed to process caption ${a.image_id}:`,v)}}}if(_.length>0){const i=o.folder("drone_images_dataset"),D=i?.folder("images");if(D){let O=1;for(const a of _)try{const v=a.image_count&&a.image_count>1?a.all_image_ids||[a.image_id]:[a.image_id],ie=v.map(async(n,j)=>{try{const r=await fetch(`/api/images/${n}/file`);if(!r.ok)throw new Error(`Failed to fetch image ${n}`);const d=await r.blob(),g=a.file_key.split(".").pop()||"jpg",u=`${String(O).padStart(4,"0")}_${String(j+1).padStart(2,"0")}.${g}`;return D.file(u,d),{success:!0,fileName:u,imageId:n}}catch(r){return console.error(`Failed to process image ${n}:`,r),{success:!1,fileName:"",imageId:n}}}),M=(await Promise.all(ie)).filter(n=>n.success);if(M.length>0){if(s==="fine-tuning"){const n=M.map(d=>`images/${d.fileName}`),j=Math.random(),r={image:n.length===1?n[0]:n,caption:a.edited||a.generated||"",metadata:{image_id:v,title:a.title,source:a.source,event_type:a.event_type,image_type:a.image_type,countries:a.countries,starred:a.starred,image_count:a.image_count||1}};if(!i)continue;if(j<.8){const d=i.file("train.jsonl");if(d){const g=await d.async("string").then(u=>JSON.parse(u||"[]")).catch(()=>[]);g.push(r),i.file("train.jsonl",JSON.stringify(g,null,2))}else i.file("train.jsonl",JSON.stringify([r],null,2))}else if(j<.9){const d=i.file("test.jsonl");if(d){const g=await d.async("string").then(u=>JSON.parse(u||"[]")).catch(()=>[]);g.push(r),i.file("test.jsonl",JSON.stringify(g,null,2))}else i.file("test.jsonl",JSON.stringify([r],null,2))}else{const d=i.file("val.jsonl");if(d){const g=await d.async("string").then(u=>JSON.parse(u||"[]")).catch(()=>[]);g.push(r),i.file("val.jsonl",JSON.stringify(g,null,2))}else i.file("val.jsonl",JSON.stringify([r],null,2))}}else{const n=M.map(r=>`images/${r.fileName}`),j={image:n.length===1?n[0]:n,caption:a.edited||a.generated||"",metadata:{image_id:v,title:a.title,source:a.source,event_type:a.event_type,image_type:a.image_type,countries:a.countries,starred:a.starred,image_count:a.image_count||1}};i&&i.file(`${String(O).padStart(4,"0")}.json`,JSON.stringify(j,null,2))}O++}}catch(v){console.error(`Failed to process caption ${a.image_id}:`,v)}}}const A=await o.generateAsync({type:"blob"}),B=URL.createObjectURL(A),P=document.createElement("a");P.href=B,P.download=`datasets_${s}_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(B);const q=(m.length||0)+(_.length||0);console.log(`Exported ${s} datasets with ${q} total images:`),m.length>0&&console.log(`- Crisis maps: ${m.length} images`),_.length>0&&console.log(`- Drone images: ${_.length} images`),ee(!0)}catch(l){console.error("Export failed:",l),alert("Failed to export dataset. Please try again.")}finally{Y(!1)}},ke=e=>{de(e),V(!0)},Pe=async()=>{if(G){me(!0);try{console.log("Deleting image with ID:",G),(await fetch(`/api/images/${G}`,{method:"DELETE"})).ok?(y(s=>s.filter(l=>l.image_id!==G)),V(!1),de("")):(console.error("Delete failed"),alert("Failed to delete image. Please try again."))}catch(e){console.error("Delete failed:",e),alert("Failed to delete image. Please try again.")}finally{me(!1)}}};return t.jsxs(ze,{children:[z?t.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx(fe,{className:"text-ifrcRed"}),t.jsx("div",{children:"Loading examples..."})]})}):t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:p.tabSelector,children:[t.jsx(We,{name:"explore-view",value:H,onChange:e=>{(e==="explore"||e==="mapDetails")&&(ne(e),e==="mapDetails"&&h.length>0&&(h[0]?.image_id&&h[0].image_id!=="undefined"&&h[0].image_id!=="null"?N(`/map/${h[0].image_id}`):console.error("Invalid image_id for navigation:",h[0]?.image_id)))},options:$e,keySelector:e=>e.key,labelSelector:e=>e.label}),t.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsxs(w,{name:"reference-examples",variant:E?"primary":"secondary",onClick:()=>xe(!E),className:"whitespace-nowrap",children:[t.jsx("span",{className:"mr-2",children:E?t.jsx("span",{className:"text-yellow-400",children:"â˜…"}):t.jsx("span",{className:"text-yellow-400",children:"â˜†"})}),"Reference Examples"]})}),t.jsx(w,{name:"export-dataset",variant:"secondary",onClick:()=>X(!0),children:"Export"})]})]}),H==="explore"?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"mb-6 space-y-4",children:t.jsx("div",{className:"flex flex-wrap items-center gap-4",children:t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2 flex-1 min-w-[300px]",children:t.jsx(He,{sources:K,types:Q,regions:le,countries:Ne,imageTypes:re,isLoadingFilters:we})})})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("p",{className:"text-sm text-gray-600",children:[k.length," of ",Z," examples"]})}),z&&t.jsx("div",{className:"text-center py-12",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx(fe,{className:"text-ifrcRed"}),t.jsx("div",{children:"Loading examples..."})]})}),!z&&te&&t.jsx("div",{className:"text-center py-12",children:t.jsx(b,{withInternalPadding:!0,className:"bg-red-50 border border-red-200 rounded-md max-w-2xl mx-auto",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"text-red-800 font-semibold text-lg",children:"Failed to Load Images"}),t.jsx("div",{className:"text-red-700",children:te}),t.jsx(w,{name:"retry-fetch",variant:"primary",onClick:()=>U(),children:"Retry"})]})})}),!z&&!te&&t.jsxs("div",{className:"space-y-4",children:[k.map(e=>t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:`${p.mapItem} flex-1`,onClick:()=>{console.log("ExplorePage: Clicking on image with ID:",e.image_id),console.log("ExplorePage: Image data:",e),e.image_id&&e.image_id!=="undefined"&&e.image_id!=="null"?(console.log("ExplorePage: Navigating to:",`/map/${e.image_id}`),console.log("ExplorePage: Full navigation URL:",`/#/map/${e.image_id}`),N(`/map/${e.image_id}`)):(console.error("Invalid image_id for navigation:",e.image_id),console.error("Full item data:",JSON.stringify(e,null,2)),alert(`Cannot navigate: Invalid image ID (${e.image_id})`))},children:[t.jsx("div",{className:p.mapItemImage,style:{width:"120px",height:"80px"},children:e.thumbnail_url?t.jsxs(t.Fragment,{children:[console.log("ExplorePage: Using thumbnail for fast loading:",e.thumbnail_url),t.jsx("img",{src:e.thumbnail_url,alt:e.file_key,onError:s=>{console.error("ExplorePage: Thumbnail failed to load, falling back to original:",e.thumbnail_url);const l=s.target;e.image_url?l.src=e.image_url:(l.style.display="none",l.parentElement.innerHTML="Img")},onLoad:()=>console.log("ExplorePage: Thumbnail loaded successfully:",e.thumbnail_url)})]}):e.image_url?t.jsxs(t.Fragment,{children:[console.log("ExplorePage: No thumbnail available, using original image:",e.image_url),t.jsx("img",{src:e.image_url,alt:e.file_key,onError:s=>{console.error("ExplorePage: Original image failed to load:",e.image_url);const l=s.target;l.style.display="none",l.parentElement.innerHTML="Img"},onLoad:()=>console.log("ExplorePage: Original image loaded successfully:",e.image_url)})]}):t.jsxs(t.Fragment,{children:[console.log("ExplorePage: No image_url or thumbnail provided for item:",e),"'Img'"]})}),t.jsxs("div",{className:p.mapItemContent,children:[t.jsx("h3",{className:p.mapItemTitle,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e.title||"Untitled"}),e.starred&&t.jsx("span",{className:"text-red-500 text-lg",title:"Starred image",children:"â˜…"})]})}),t.jsx("div",{className:p.mapItemMetadata,children:t.jsxs("div",{className:p.metadataTags,children:[e.image_type!=="drone_image"&&t.jsx("span",{className:p.metadataTagSource,children:e.source&&e.source.includes(", ")?e.source.split(", ").map(s=>K.find(l=>l.s_code===s.trim())?.label||s.trim()).join(", "):K.find(s=>s.s_code===e.source)?.label||e.source}),t.jsx("span",{className:p.metadataTagType,children:e.event_type&&e.event_type.includes(", ")?e.event_type.split(", ").map(s=>Q.find(l=>l.t_code===s.trim())?.label||s.trim()).join(", "):Q.find(s=>s.t_code===e.event_type)?.label||e.event_type}),t.jsx("span",{className:p.metadataTag,children:re.find(s=>s.image_type===e.image_type)?.label||e.image_type}),t.jsx("span",{className:p.metadataTag,children:e.model==="manual"?"Manual":"Generated"}),e.image_count&&e.image_count>1&&t.jsxs("span",{className:p.metadataTag,title:`Multi-upload with ${e.image_count} images`,children:["ðŸ“· ",e.image_count]}),(!e.image_count||e.image_count<=1)&&t.jsx("span",{className:p.metadataTag,title:"Single Upload",children:"Single"}),e.countries&&e.countries.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:p.metadataTag,children:le.find(s=>s.r_code===e.countries[0].r_code)?.label||"Unknown Region"}),t.jsx("span",{className:p.metadataTag,children:e.countries.map(s=>s.label).join(", ")})]})]})})]})]}),$&&t.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:t.jsx(w,{name:`delete-${e.image_id}`,variant:"tertiary",size:1,className:"bg-red-50 hover:bg-red-100 text-red-700 border border-red-200 hover:border-red-300",onClick:()=>ke(e.image_id),title:"Delete","aria-label":"Delete saved image",children:t.jsx(Ue,{className:"w-4 h-4"})})})]},e.image_id)),!k.length&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"No examples found."})}),!z&&Z>0&&t.jsx(qe,{currentPage:W,totalPages:Ce,totalItems:Z,itemsPerPage:C,onPageChange:ge})]})]})]}):t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500",children:"Map Details view coming soon..."}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"This will show detailed information about individual maps"})]})})]}),Ee&&t.jsx("div",{className:p.fullSizeModalOverlay,onClick:()=>V(!1),children:t.jsx("div",{className:p.fullSizeModalContent,onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:p.ratingWarningContent,children:[t.jsx("h3",{className:p.ratingWarningTitle,children:"Delete Image?"}),t.jsx("p",{className:p.ratingWarningText,children:"This action cannot be undone. Are you sure you want to delete this saved image and all related data?"}),t.jsxs("div",{className:p.ratingWarningButtons,children:[t.jsx(w,{name:"confirm-delete",variant:"secondary",onClick:Pe,disabled:se,children:se?"Deleting...":"Delete"}),t.jsx(w,{name:"cancel-delete",variant:"tertiary",onClick:()=>V(!1),disabled:se,children:"Cancel"})]})]})})}),t.jsx(Ve,{isOpen:Se,onClose:()=>{X(!1),ee(!1),Y(!1)},onExport:(e,s)=>{const l=k.filter(o=>s.includes(o.image_type));Fe(l,e)},filteredCount:k.length,totalCount:Z,hasFilters:!!(F||x||S||T||L||R||J||I||E),crisisMapsCount:k.filter(e=>e.image_type==="crisis_map").length,droneImagesCount:k.filter(e=>e.image_type==="drone_image").length,isLoading:Te,exportSuccess:Ie})]})}export{ft as default};
