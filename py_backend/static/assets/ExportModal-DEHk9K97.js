import{r as o,j as e}from"./vendor-react-BxsGb6Ph.js";import{z as i,n as r,F as W,O,f as v,d as P,_ as N,L as B,j as F}from"./vendor-ui-l_DttnRj.js";import{u as A}from"./index-CgA3B3BT.js";function ie({sources:_,types:S,regions:f,countries:I,imageTypes:k,isLoadingFilters:a=!1}){const[d,y]=o.useState(!1),{search:T,setSearch:p,srcFilter:w,setSrcFilter:m,catFilter:z,setCatFilter:u,regionFilter:h,setRegionFilter:g,countryFilter:x,setCountryFilter:j,imageTypeFilter:M,setImageTypeFilter:b,uploadTypeFilter:E,setUploadTypeFilter:C,showReferenceExamples:c,setShowReferenceExamples:t,clearAllFilters:n}=A();return e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(i,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:e.jsx(r,{name:"toggle-filters",variant:"secondary",onClick:()=>y(!d),className:"whitespace-nowrap",title:d?"Hide Filters":"Show Filters",children:e.jsx(W,{className:"w-4 h-4"})})}),e.jsx(i,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2 flex-1 min-w-[300px]",children:e.jsx(O,{name:"search",placeholder:"Search examples...",value:T,onChange:l=>p(l||"")})}),e.jsx(i,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:e.jsx(r,{name:"clear-filters",variant:"secondary",onClick:n,children:"Clear Filters"})})]}),d&&e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-md p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(i,{withInternalPadding:!0,className:"p-2",children:e.jsx(v,{name:"source",placeholder:a?"Loading...":"All Sources",options:_,value:w||null,onChange:l=>m(l||""),keySelector:l=>l.s_code,labelSelector:l=>l.label,required:!1,disabled:a})}),e.jsx(i,{withInternalPadding:!0,className:"p-2",children:e.jsx(v,{name:"category",placeholder:a?"Loading...":"All Categories",options:S,value:z||null,onChange:l=>u(l||""),keySelector:l=>l.t_code,labelSelector:l=>l.label,required:!1,disabled:a})}),e.jsx(i,{withInternalPadding:!0,className:"p-2",children:e.jsx(v,{name:"region",placeholder:a?"Loading...":"All Regions",options:f,value:h||null,onChange:l=>g(l||""),keySelector:l=>l.r_code,labelSelector:l=>l.label,required:!1,disabled:a})}),e.jsx(i,{withInternalPadding:!0,className:"p-2",children:e.jsx(P,{name:"country",placeholder:a?"Loading...":"All Countries",options:I,value:x?[x]:[],onChange:l=>j(l[0]||""),keySelector:l=>l.c_code,labelSelector:l=>l.label,disabled:a})}),e.jsx(i,{withInternalPadding:!0,className:"p-2",children:e.jsx(v,{name:"imageType",placeholder:a?"Loading...":"All Image Types",options:k,value:M||null,onChange:l=>b(l||""),keySelector:l=>l.image_type,labelSelector:l=>l.label,required:!1,disabled:a})}),e.jsx(i,{withInternalPadding:!0,className:"p-2",children:e.jsx(v,{name:"uploadType",placeholder:"All Upload Types",options:[{key:"single",label:"Single Upload"},{key:"multiple",label:"Multiple Upload"}],value:E||null,onChange:l=>C(l||""),keySelector:l=>l.key,labelSelector:l=>l.label,required:!1,disabled:!1})})]})})]})}const R="_fullSizeModalOverlay_cyz3b_1",q="_fullSizeModalContent_cyz3b_29",G="_ratingWarningContent_cyz3b_53",U="_ratingWarningTitle_cyz3b_65",D="_exportModeSection_cyz3b_133",V="_splitConfigSection_cyz3b_143",Y="_splitConfigTitle_cyz3b_153",$="_splitInputsContainer_cyz3b_167",H="_splitInputGroup_cyz3b_183",J="_splitInputLabel_cyz3b_197",K="_splitInput_cyz3b_167",Q="_splitTotal_cyz3b_247",X="_splitTotalError_cyz3b_261",Z="_checkboxesContainer_cyz3b_271",L="_ratingWarningButtons_cyz3b_289",ee="_singleExportMessage_cyz3b_309",le="_navigateButtonContainer_cyz3b_333",se="_loadingOverlay_cyz3b_349",s={fullSizeModalOverlay:R,fullSizeModalContent:q,ratingWarningContent:G,ratingWarningTitle:U,exportModeSection:D,splitConfigSection:V,splitConfigTitle:Y,splitInputsContainer:$,splitInputGroup:H,splitInputLabel:J,splitInput:K,splitTotal:Q,splitTotalError:X,checkboxesContainer:Z,ratingWarningButtons:L,singleExportMessage:ee,navigateButtonContainer:le,loadingOverlay:se};function re({isOpen:_,onClose:S,onExport:f,crisisMapsCount:I,droneImagesCount:k,isLoading:a=!1,exportSuccess:d=!1,variant:y="bulk",onNavigateAndExport:T}){const[p,w]=o.useState("standard"),[m,z]=o.useState(80),[u,h]=o.useState(10),[g,x]=o.useState(10),[j,M]=o.useState(!0),[b,E]=o.useState(!0),C=()=>{if(y==="single"){f(p,["crisis_map","drone_image"]);return}if(!j&&!b){alert("Please select at least one image type to export.");return}const t=[];j&&t.push("crisis_map"),b&&t.push("drone_image"),f(p,t)},c=()=>{S()};return _?y==="single"?e.jsx("div",{className:s.fullSizeModalOverlay,onClick:c,children:e.jsxs("div",{className:s.fullSizeModalContent,onClick:t=>t.stopPropagation(),children:[a&&e.jsx("div",{className:s.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(N,{className:"text-ifrcRed"}),e.jsx("div",{className:"text-lg font-medium",children:"Exporting..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"This might take a few seconds"})]})}),d&&e.jsx("div",{className:s.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"Export Successful!"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your dataset has been downloaded"}),e.jsx(r,{name:"close-export-success",onClick:c,className:"mt-4",children:"Close"})]})}),e.jsxs("div",{className:s.ratingWarningContent,children:[e.jsx("h3",{className:s.ratingWarningTitle,children:"Export Single Item"}),e.jsxs("div",{className:s.singleExportMessage,children:[e.jsx("p",{children:"This only exports the 1 item currently on display."}),e.jsx("p",{children:'You may export the entire dataset from the "list view" here:'})]}),e.jsx("div",{className:s.navigateButtonContainer,children:e.jsx(r,{name:"navigate-to-list",variant:"secondary",onClick:T,children:"Navigate to List View"})}),e.jsxs("div",{className:s.ratingWarningButtons,children:[e.jsx(r,{name:"continue-export",onClick:C,disabled:a,children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"text-white"}),"Exporting..."]}):"Continue"}),e.jsx(r,{name:"cancel-export",variant:"tertiary",onClick:c,disabled:a,children:"Cancel"})]})]})]})}):e.jsx("div",{className:s.fullSizeModalOverlay,onClick:c,children:e.jsxs("div",{className:s.fullSizeModalContent,onClick:t=>t.stopPropagation(),children:[a&&e.jsx("div",{className:s.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(N,{className:"text-ifrcRed"}),e.jsx("div",{className:"text-lg font-medium",children:"Exporting..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"This might take a few seconds"})]})}),d&&e.jsx("div",{className:s.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"Export Successful!"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your dataset has been downloaded"}),e.jsx(r,{name:"close-export-success",onClick:c,className:"mt-4",children:"Close"})]})}),e.jsxs("div",{className:s.ratingWarningContent,children:[e.jsx("h3",{className:s.ratingWarningTitle,children:"Export Dataset"}),e.jsx("div",{className:s.exportModeSection,children:e.jsx(B,{name:"export-mode",value:p,onChange:t=>{(t==="standard"||t==="fine-tuning")&&w(t)},options:[{key:"standard",label:"Standard"},{key:"fine-tuning",label:"Fine-tuning"}],keySelector:t=>t.key,labelSelector:t=>t.label,disabled:a})}),p==="fine-tuning"&&e.jsxs("div",{className:s.splitConfigSection,children:[e.jsx("div",{className:s.splitConfigTitle,children:"Dataset Split Configuration"}),e.jsxs("div",{className:s.splitInputsContainer,children:[e.jsxs("div",{className:s.splitInputGroup,children:[e.jsx("label",{htmlFor:"train-split",className:s.splitInputLabel,children:"Train (%)"}),e.jsx("input",{id:"train-split",type:"number",min:"0",max:"100",value:m,onChange:t=>{const n=parseInt(t.target.value)||0,l=100-n;l>=0&&(z(n),u+g>l&&(h(Math.floor(l/2)),x(l-Math.floor(l/2))))},className:s.splitInput,disabled:a})]}),e.jsxs("div",{className:s.splitInputGroup,children:[e.jsx("label",{htmlFor:"test-split",className:s.splitInputLabel,children:"Test (%)"}),e.jsx("input",{id:"test-split",type:"number",min:"0",max:"100",value:u,onChange:t=>{const n=parseInt(t.target.value)||0,l=100-m-n;l>=0&&(h(n),x(l))},className:s.splitInput,disabled:a})]}),e.jsxs("div",{className:s.splitInputGroup,children:[e.jsx("label",{htmlFor:"val-split",className:s.splitInputLabel,children:"Val (%)"}),e.jsx("input",{id:"val-split",type:"number",min:"0",max:"100",value:g,onChange:t=>{const n=parseInt(t.target.value)||0,l=100-m-n;l>=0&&(x(n),h(l))},className:s.splitInput,disabled:a})]})]}),m+u+g!==100&&e.jsx("div",{className:s.splitTotal,children:e.jsx("span",{className:s.splitTotalError,children:"Must equal 100%"})})]}),e.jsxs("div",{className:s.checkboxesContainer,children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(F,{name:"crisis-maps",label:`Crisis Maps (${I} images)`,value:j,onChange:t=>M(t),disabled:a})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(F,{name:"drone-images",label:`Drone Images (${k} images)`,value:b,onChange:t=>E(t),disabled:a})})]}),e.jsxs("div",{className:s.ratingWarningButtons,children:[e.jsx(r,{name:"confirm-export",onClick:C,disabled:a,children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"text-white"}),"Exporting..."]}):"Export Selected"}),e.jsx(r,{name:"cancel-export",variant:"tertiary",onClick:c,disabled:a,children:"Cancel"})]})]})]})}):null}export{re as E,ie as F};
