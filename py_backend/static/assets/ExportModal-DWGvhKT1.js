import{r as n,j as e,P as V,S as A,o as O,T as H,D as q,z as b,n as v,O as D,J as F,V as G,_ as B,L as R}from"./index-RA4UIF3R.js";const $=({title:c,titleId:i,...r})=>n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em","aria-labelledby":i},r),c?n.createElement("title",{id:i},c):null,n.createElement("g",{clipPath:"url(#checkbox-indeterminate-line_svg__a)"},n.createElement("path",{d:"M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Zm1 2v14h14V5H5Zm2 6h10v2H7v-2Z"})),n.createElement("defs",null,n.createElement("clipPath",{id:"checkbox-indeterminate-line_svg__a"},n.createElement("path",{d:"M0 0h24v24H0z"})))),U=({title:c,titleId:i,...r})=>n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em","aria-labelledby":i},r),c?n.createElement("title",{id:i},c):null,n.createElement("g",{clipPath:"url(#filter-line_svg__a)"},n.createElement("path",{d:"M9 13.5 4 6H3V4h18v2h-1l-5 7.5V22H9v-8.5ZM6.404 6 11 12.894V20h2v-7.106L17.596 6H6.404Z"})),n.createElement("defs",null,n.createElement("clipPath",{id:"filter-line_svg__a"},n.createElement("path",{d:"M0 0h24v24H0z"}))));function Z(c){const{className:i,indeterminate:r,value:j}=c;return e.jsxs(e.Fragment,{children:[r&&e.jsx($,{className:i}),j&&!r&&e.jsx(V,{className:i}),!j&&!r&&e.jsx(A,{className:i})]})}const Y="_checkbox_12g7n_1",J="_with-background_12g7n_7",K="_checkmark-container_12g7n_12",Q="_input_12g7n_18",X="_content_12g7n_33",L="_description_12g7n_40",ee="_checked_12g7n_45",ae="_checkmark_12g7n_12",le="_disabled-checkbox_12g7n_58",h={checkbox:Y,withBackground:J,checkmarkContainer:K,input:Q,content:X,description:L,checked:ee,checkmark:ae,disabledCheckbox:le};function P(c){const{className:i,checkmark:r=Z,checkmarkClassName:j,checkmarkContainerClassName:z,disabled:s,error:x,indeterminate:k,inputClassName:I,invertedLogic:p=!1,label:_,labelContainerClassName:f,name:E,onChange:C,readOnly:u,tooltip:S,value:N,description:g,withBackground:T,...w}=c,M=n.useCallback(t=>{const o=t.currentTarget.checked;C(p?!o:o,E)},[E,C,p]),y=p?!N:N,m=O(h.checkbox,i,!k&&y&&h.checked,T&&h.withBackground,s&&h.disabledCheckbox,u&&h.readOnly);return e.jsxs("label",{className:m,title:S,children:[e.jsxs("div",{className:O(h.checkmarkContainer,z),children:[e.jsx("input",{onChange:M,className:O(h.input,I),type:"checkbox",checked:y??!1,disabled:s||u,readOnly:u,...w}),e.jsx(r,{className:O(h.checkmark,j),value:y??!1,indeterminate:k,"aria-hidden":"true"})]}),(_||g)&&e.jsxs("div",{className:h.content,children:[_&&e.jsx("div",{className:f,children:_}),g&&e.jsx("div",{className:h.description,children:g})]}),x&&e.jsx(H,{children:x})]})}function Ce({sources:c,types:i,regions:r,countries:j,imageTypes:z,isLoadingFilters:s=!1}){const[x,k]=n.useState(!1),[I,p]=n.useState(""),{search:_,setSearch:f,srcFilter:E,setSrcFilter:C,catFilter:u,setCatFilter:S,regionFilter:N,setRegionFilter:g,countryFilter:T,setCountryFilter:w,imageTypeFilter:M,setImageTypeFilter:y,uploadTypeFilter:m,setUploadTypeFilter:t,showReferenceExamples:o,setShowReferenceExamples:d,clearAllFilters:W}=q();return n.useEffect(()=>{p(_)},[_]),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:e.jsx(v,{name:"toggle-filters",variant:"secondary",onClick:()=>k(!x),className:"whitespace-nowrap",title:x?"Hide Filters":"Show Filters",children:e.jsx(U,{className:"w-4 h-4"})})}),e.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2 flex-1 min-w-[300px]",children:e.jsx(D,{name:"search",placeholder:"Search",value:I,onChange:a=>p(a||""),onKeyDown:a=>{a.key==="Enter"&&f(I)}})}),e.jsx(b,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:e.jsx(v,{name:"clear-filters",variant:"secondary",onClick:W,children:"Clear Filters"})})]}),x&&e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-md p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(b,{withInternalPadding:!0,className:"p-2",children:e.jsx(F,{name:"source",placeholder:s?"Loading...":"All Sources",options:c,value:E||null,onChange:a=>C(a||""),keySelector:a=>a.s_code,labelSelector:a=>a.label,required:!1,disabled:s})}),e.jsx(b,{withInternalPadding:!0,className:"p-2",children:e.jsx(F,{name:"category",placeholder:s?"Loading...":"All Categories",options:i,value:u||null,onChange:a=>S(a||""),keySelector:a=>a.t_code,labelSelector:a=>a.label,required:!1,disabled:s})}),e.jsx(b,{withInternalPadding:!0,className:"p-2",children:e.jsx(F,{name:"region",placeholder:s?"Loading...":"All Regions",options:r,value:N||null,onChange:a=>g(a||""),keySelector:a=>a.r_code,labelSelector:a=>a.label,required:!1,disabled:s})}),e.jsx(b,{withInternalPadding:!0,className:"p-2",children:e.jsx(G,{name:"country",placeholder:s?"Loading...":"All Countries",options:j,value:T?[T]:[],onChange:a=>w(a[0]||""),keySelector:a=>a.c_code,labelSelector:a=>a.label,disabled:s})}),e.jsx(b,{withInternalPadding:!0,className:"p-2",children:e.jsx(F,{name:"imageType",placeholder:s?"Loading...":"All Image Types",options:z,value:M||null,onChange:a=>y(a||""),keySelector:a=>a.image_type,labelSelector:a=>a.label,required:!1,disabled:s})}),e.jsx(b,{withInternalPadding:!0,className:"p-2",children:e.jsx(F,{name:"uploadType",placeholder:"All Upload Types",options:[{key:"single",label:"Single Upload"},{key:"multiple",label:"Multiple Upload"}],value:m||null,onChange:a=>t(a||""),keySelector:a=>a.key,labelSelector:a=>a.label,required:!1,disabled:!1})})]})})]})}const te="_fullSizeModalOverlay_cyz3b_1",se="_fullSizeModalContent_cyz3b_29",ne="_ratingWarningContent_cyz3b_53",ie="_ratingWarningTitle_cyz3b_65",re="_exportModeSection_cyz3b_133",ce="_splitConfigSection_cyz3b_143",oe="_splitConfigTitle_cyz3b_153",de="_splitInputsContainer_cyz3b_167",pe="_splitInputGroup_cyz3b_183",me="_splitInputLabel_cyz3b_197",he="_splitInput_cyz3b_167",xe="_splitTotal_cyz3b_247",ue="_splitTotalError_cyz3b_261",ge="_checkboxesContainer_cyz3b_271",be="_ratingWarningButtons_cyz3b_289",ve="_singleExportMessage_cyz3b_309",je="_navigateButtonContainer_cyz3b_333",_e="_loadingOverlay_cyz3b_349",l={fullSizeModalOverlay:te,fullSizeModalContent:se,ratingWarningContent:ne,ratingWarningTitle:ie,exportModeSection:re,splitConfigSection:ce,splitConfigTitle:oe,splitInputsContainer:de,splitInputGroup:pe,splitInputLabel:me,splitInput:he,splitTotal:xe,splitTotalError:ue,checkboxesContainer:ge,ratingWarningButtons:be,singleExportMessage:ve,navigateButtonContainer:je,loadingOverlay:_e};function Ne({isOpen:c,onClose:i,onExport:r,crisisMapsCount:j,droneImagesCount:z,isLoading:s=!1,exportSuccess:x=!1,variant:k="bulk",onNavigateAndExport:I}){const[p,_]=n.useState("standard"),[f,E]=n.useState(80),[C,u]=n.useState(10),[S,N]=n.useState(10),[g,T]=n.useState(!0),[w,M]=n.useState(!0),y=()=>{if(k==="single"){r(p,["crisis_map","drone_image"]);return}if(!g&&!w){alert("Please select at least one image type to export.");return}const t=[];g&&t.push("crisis_map"),w&&t.push("drone_image"),r(p,t)},m=()=>{i()};return c?k==="single"?e.jsx("div",{className:l.fullSizeModalOverlay,onClick:m,children:e.jsxs("div",{className:l.fullSizeModalContent,onClick:t=>t.stopPropagation(),children:[s&&e.jsx("div",{className:l.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(B,{className:"text-ifrcRed"}),e.jsx("div",{className:"text-lg font-medium",children:"Exporting..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"This might take a few seconds"})]})}),x&&e.jsx("div",{className:l.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"Export Successful!"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your dataset has been downloaded"}),e.jsx(v,{name:"close-export-success",onClick:m,className:"mt-4",children:"Close"})]})}),e.jsxs("div",{className:l.ratingWarningContent,children:[e.jsx("h3",{className:l.ratingWarningTitle,children:"Export Single Item"}),e.jsxs("div",{className:l.singleExportMessage,children:[e.jsx("p",{children:"This only exports the 1 item currently on display."}),e.jsx("p",{children:'You may export the entire dataset from the "list view" here:'})]}),e.jsx("div",{className:l.navigateButtonContainer,children:e.jsx(v,{name:"navigate-to-list",variant:"secondary",onClick:I,children:"Navigate to List View"})}),e.jsxs("div",{className:l.ratingWarningButtons,children:[e.jsx(v,{name:"continue-export",onClick:y,disabled:s,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"text-white"}),"Exporting..."]}):"Continue"}),e.jsx(v,{name:"cancel-export",variant:"tertiary",onClick:m,disabled:s,children:"Cancel"})]})]})]})}):e.jsx("div",{className:l.fullSizeModalOverlay,onClick:m,children:e.jsxs("div",{className:l.fullSizeModalContent,onClick:t=>t.stopPropagation(),children:[s&&e.jsx("div",{className:l.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(B,{className:"text-ifrcRed"}),e.jsx("div",{className:"text-lg font-medium",children:"Exporting..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"This might take a few seconds"})]})}),x&&e.jsx("div",{className:l.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"Export Successful!"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your dataset has been downloaded"}),e.jsx(v,{name:"close-export-success",onClick:m,className:"mt-4",children:"Close"})]})}),e.jsxs("div",{className:l.ratingWarningContent,children:[e.jsx("h3",{className:l.ratingWarningTitle,children:"Export Dataset"}),e.jsx("div",{className:l.exportModeSection,children:e.jsx(R,{name:"export-mode",value:p,onChange:t=>{(t==="standard"||t==="fine-tuning")&&_(t)},options:[{key:"standard",label:"Standard"},{key:"fine-tuning",label:"Fine-tuning"}],keySelector:t=>t.key,labelSelector:t=>t.label,disabled:s})}),p==="fine-tuning"&&e.jsxs("div",{className:l.splitConfigSection,children:[e.jsx("div",{className:l.splitConfigTitle,children:"Dataset Split Configuration"}),e.jsxs("div",{className:l.splitInputsContainer,children:[e.jsxs("div",{className:l.splitInputGroup,children:[e.jsx("label",{htmlFor:"train-split",className:l.splitInputLabel,children:"Train (%)"}),e.jsx("input",{id:"train-split",type:"number",min:"0",max:"100",value:f,onChange:t=>{const o=parseInt(t.target.value)||0,d=100-o;d>=0&&(E(o),C+S>d&&(u(Math.floor(d/2)),N(d-Math.floor(d/2))))},className:l.splitInput,disabled:s})]}),e.jsxs("div",{className:l.splitInputGroup,children:[e.jsx("label",{htmlFor:"test-split",className:l.splitInputLabel,children:"Test (%)"}),e.jsx("input",{id:"test-split",type:"number",min:"0",max:"100",value:C,onChange:t=>{const o=parseInt(t.target.value)||0,d=100-f-o;d>=0&&(u(o),N(d))},className:l.splitInput,disabled:s})]}),e.jsxs("div",{className:l.splitInputGroup,children:[e.jsx("label",{htmlFor:"val-split",className:l.splitInputLabel,children:"Val (%)"}),e.jsx("input",{id:"val-split",type:"number",min:"0",max:"100",value:S,onChange:t=>{const o=parseInt(t.target.value)||0,d=100-f-o;d>=0&&(N(o),u(d))},className:l.splitInput,disabled:s})]})]}),f+C+S!==100&&e.jsx("div",{className:l.splitTotal,children:e.jsx("span",{className:l.splitTotalError,children:"Must equal 100%"})})]}),e.jsxs("div",{className:l.checkboxesContainer,children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(P,{name:"crisis-maps",label:`Crisis Maps (${j} images)`,value:g,onChange:t=>T(t),disabled:s})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(P,{name:"drone-images",label:`Drone Images (${z} images)`,value:w,onChange:t=>M(t),disabled:s})})]}),e.jsxs("div",{className:l.ratingWarningButtons,children:[e.jsx(v,{name:"confirm-export",onClick:y,disabled:s,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"text-white"}),"Exporting..."]}):"Export Selected"}),e.jsx(v,{name:"cancel-export",variant:"tertiary",onClick:m,disabled:s,children:"Cancel"})]})]})]})}):null}export{Ne as E,Ce as F};
