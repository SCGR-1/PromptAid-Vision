const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-g8hSi49F.js","assets/vendor-react-DAdyb5sm.js","assets/vendor-DyNqUykN.js","assets/vendor-ui-D6Mv63JJ.js","assets/vendor-ui-DpEM1HT6.css","assets/index-BsrMOmjk.css","assets/index-BKlKgxqV.js","assets/useAdmin-83xsYm6n.js","assets/ExportModal-CBr9nB9D.js","assets/ExportModal-BoB3JpqO.css","assets/index-BzPMJFRS.css","assets/AdminPage-BwkoCIN3.js","assets/AdminPage-VgSjQ50W.css","assets/index-b9cDMBDN.js","assets/index-tDgjKyWF.css"])))=>i.map(i=>d[i]);
import{r as a,j as e,L as zt,u as At,c as $t,R as Ot,b as Bt}from"./vendor-react-DAdyb5sm.js";import{N as rn,G as Ut,U as Fn,S as Ht,A as Wt,z as B,n as w,M as Gt,Q as Vt,a as Yt,b as qt,L as Zt,B as ln,D as cn,C as Kt,c as Jt,O as D,f as Z,d as Mn,e as Qt,_ as on,R as ee,l as Xt,t as ea}from"./vendor-ui-D6Mv63JJ.js";import{u as na,a as dn,O as ta,k as aa}from"./vendor-DyNqUykN.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))p(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const j of d.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&p(j)}).observe(document,{childList:!0,subtree:!0});function o(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function p(c){if(c.ep)return;c.ep=!0;const d=o(c);fetch(c.href,d)}})();const sa="modulepreload",ia=function(i){return"/app/"+i},Ln={},Pe=function(s,o,p){let c=Promise.resolve();if(o&&o.length>0){let S=function(x){return Promise.all(x.map(l=>Promise.resolve(l).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const j=document.querySelector("meta[property=csp-nonce]"),C=j?.nonce||j?.getAttribute("nonce");c=S(o.map(x=>{if(x=ia(x),x in Ln)return;Ln[x]=!0;const l=x.endsWith(".css"),b=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${b}`))return;const M=document.createElement("link");if(M.rel=l?"stylesheet":sa,l||(M.as="script"),M.crossOrigin="",M.href=x,C&&M.setAttribute("nonce",C),document.head.appendChild(M),l)return new Promise((P,_)=>{M.addEventListener("load",P),M.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(j){const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=j,window.dispatchEvent(C),!C.defaultPrevented)throw j}return c.then(j=>{for(const C of j||[])C.status==="rejected"&&d(C.reason);return s().catch(d)})},oa="_dropdownContainer_1six7_3",ra="_dropdownMenu_1six7_15",la="_dropdownContent_1six7_43",sn={dropdownContainer:oa,dropdownMenu:ra,dropdownContent:la},ca=[{to:"/upload",label:"Upload",Icon:Fn},{to:"/explore",label:"Explore",Icon:Ht},{to:"/analytics",label:"Analytics",Icon:Wt}];function da(){const i=na(),s=dn(),[o,p]=a.useState(!1),c=a.useRef(null);return a.useEffect(()=>{const d=j=>{c.current&&!c.current.contains(j.target)&&p(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]),e.jsx("nav",{className:"border-b border-gray-200 bg-white shadow-sm sticky top-0 z-50 backdrop-blur-sm bg-white/95",children:e.jsxs(rn,{className:"border-b-2 border-ifrcRed",contentClassName:"grid grid-cols-3 items-center py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0 cursor-pointer group transition-all duration-200 hover:scale-105",onClick:()=>{if(!(i.pathname==="/upload"||i.pathname==="/")){if(i.pathname==="/upload"){if(window.confirmNavigationIfNeeded){window.confirmNavigationIfNeeded("/");return}if(!confirm("You have unsaved changes. Are you sure you want to leave?"))return}s("/")}},children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-ifrcRed/10 to-ifrcRed/20 group-hover:from-ifrcRed/20 group-hover:to-ifrcRed/30 transition-all duration-200",children:e.jsx(Ut,{className:"h-8 w-8 flex-shrink-0 text-ifrcRed"})}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-bold text-xl text-gray-900 leading-tight",children:"PromptAid Vision"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("nav",{className:"flex items-center space-x-4 bg-gray-50/80 rounded-xl p-2 backdrop-blur-sm",children:ca.map(({to:d,label:j,Icon:C})=>{const S=i.pathname===d||d==="/upload"&&i.pathname==="/"||d==="/explore"&&i.pathname.startsWith("/map/"),x=i.pathname==="/upload"||i.pathname==="/",l=d==="/upload"||d==="/";return e.jsxs("div",{className:"relative",children:[e.jsx(B,{withInternalPadding:!0,className:"p-2",children:e.jsxs(w,{name:j.toLowerCase(),variant:S?"primary":"tertiary",size:1,className:`transition-all duration-200 ${S?"shadow-lg shadow-ifrcRed/20 transform scale-105":"hover:bg-white hover:shadow-md hover:scale-105"}`,onClick:()=>{if(!(x&&l)){if(i.pathname==="/upload"){if(window.confirmNavigationIfNeeded){window.confirmNavigationIfNeeded(d);return}if(!confirm("You have unsaved changes. Are you sure you want to leave?"))return}s(d)}},children:[e.jsx(C,{className:`w-4 h-4 transition-transform duration-200 ${S?"scale-110":"group-hover:scale-110"}`}),e.jsx("span",{className:"inline ml-2 font-semibold",children:j})]})}),S&&e.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-8 h-1 bg-ifrcRed rounded-full animate-pulse"})]},d)})})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:sn.dropdownContainer,ref:c,children:[e.jsx(B,{withInternalPadding:!0,className:"p-2",children:e.jsx(w,{name:"more-options",variant:o?"primary":"tertiary",size:1,className:"transition-all duration-200",onClick:()=>p(!o),children:e.jsx(Gt,{className:"w-4 h-4"})})}),o&&e.jsx("div",{className:sn.dropdownMenu,children:e.jsxs("div",{className:sn.dropdownContent,children:[e.jsx(B,{withInternalPadding:!0,className:"p-2",children:e.jsxs(w,{name:"help-support",variant:"tertiary",size:1,className:"w-full justify-start",onClick:()=>{if(p(!1),i.pathname==="/upload"){if(window.confirmNavigationIfNeeded){window.confirmNavigationIfNeeded("/help");return}if(!confirm("You have unsaved changes. Are you sure you want to leave?"))return}s("/help")},children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2 font-semibold",children:"Help & Support"})]})}),e.jsx(B,{withInternalPadding:!0,className:"p-2",children:e.jsxs(w,{name:"dev",variant:"tertiary",size:1,className:"w-full justify-start",onClick:()=>{if(p(!1),i.pathname==="/upload"){if(window.confirmNavigationIfNeeded){window.confirmNavigationIfNeeded("/admin");return}if(!confirm("You have unsaved changes. Are you sure you want to leave?"))return}s("/admin")},children:[e.jsx(Yt,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2 font-semibold",children:"Dev"})]})})]})})]})})]})})}function ua(){return e.jsxs(e.Fragment,{children:[e.jsx(da,{}),e.jsx(ta,{})]})}const ga="_uploadContainer_1w5i1_1",pa="_dropZone_1w5i1_9",ma="_hasFile_1w5i1_30",ha="_dropZoneIcon_1w5i1_37",fa="_dropZoneText_1w5i1_43",xa="_dropZoneSubtext_1w5i1_49",va="_filePreview_1w5i1_55",ja="_filePreviewImage_1w5i1_64",_a="_fileName_1w5i1_110",wa="_fileInfo_1w5i1_118",Ca="_helpLink_1w5i1_125",ya="_loadingContainer_1w5i1_145",Sa="_loadingText_1w5i1_153",ba="_generateButtonContainer_1w5i1_157",Na="_uploadedMapContainer_1w5i1_165",ka="_uploadedMapImage_1w5i1_169",Ia="_formGrid_1w5i1_209",Ma="_titleField_1w5i1_222",La="_ratingDescription_1w5i1_230",Ta="_ratingSlider_1w5i1_235",Da="_ratingLabel_1w5i1_242",Pa="_ratingInput_1w5i1_251",Fa="_ratingValue_1w5i1_256",Ea="_submitSection_1w5i1_266",Ra="_successContainer_1w5i1_275",za="_successHeading_1w5i1_280",Aa="_successText_1w5i1_285",$a="_successButton_1w5i1_291",Oa="_viewFullSizeButton_1w5i1_297",Ba="_fullSizeModalOverlay_1w5i1_306",Ua="_lightModalOverlay_1w5i1_320",Ha="_fullSizeModalContent_1w5i1_334",Wa="_fullSizeModalHeader_1w5i1_345",Ga="_fullSizeModalImage_1w5i1_361",Va="_confirmSection_1w5i1_398",Ya="_step2Layout_1w5i1_407",qa="_topRow_1w5i1_413",Za="_ratingHidden_1w5i1_421",Ka="_imageSection_1w5i1_425",Ja="_ratingContent_1w5i1_435",Qa="_mapColumn_1w5i1_453",Xa="_contentColumn_1w5i1_458",es="_step2bLayout_1w5i1_465",ns="_metadataSectionCard_1w5i1_562",ts="_droneMetadataSection_1w5i1_571",as="_droneMetadataHeading_1w5i1_577",ss="_droneMetadataGrid_1w5i1_585",is="_rtkFixContainer_1w5i1_591",os="_rtkFixLabel_1w5i1_597",rs="_rtkFixCheckbox_1w5i1_606",ls="_confirmButtonContainer_1w5i1_621",cs="_ratingWarningContent_1w5i1_629",ds="_ratingWarningTitle_1w5i1_637",us="_ratingWarningText_1w5i1_644",gs="_ratingWarningButtons_1w5i1_651",ps="_preprocessingProgress_1w5i1_658",ms="_carouselContainer_1w5i1_711",hs="_carouselImageWrapper_1w5i1_716",fs="_carouselImage_1w5i1_716",xs="_carouselNavigation_1w5i1_739",vs="_carouselButton_1w5i1_751",js="_carouselIndicators_1w5i1_775",_s="_carouselIndicator_1w5i1_775",ws="_carouselIndicatorActive_1w5i1_804",Cs="_viewImageButtonContainer_1w5i1_840",t={uploadContainer:ga,dropZone:pa,hasFile:ma,dropZoneIcon:ha,dropZoneText:fa,dropZoneSubtext:xa,filePreview:va,filePreviewImage:ja,fileName:_a,fileInfo:wa,helpLink:Ca,loadingContainer:ya,loadingText:Sa,generateButtonContainer:ba,uploadedMapContainer:Na,uploadedMapImage:ka,formGrid:Ia,titleField:Ma,ratingDescription:La,ratingSlider:Ta,ratingLabel:Da,ratingInput:Pa,ratingValue:Fa,submitSection:Ea,successContainer:Ra,successHeading:za,successText:Aa,successButton:$a,viewFullSizeButton:Oa,fullSizeModalOverlay:Ba,lightModalOverlay:Ua,fullSizeModalContent:Ha,fullSizeModalHeader:Wa,fullSizeModalImage:Ga,confirmSection:Va,step2Layout:Ya,topRow:qa,ratingHidden:Za,imageSection:Ka,ratingContent:Ja,mapColumn:Qa,contentColumn:Xa,step2bLayout:es,metadataSectionCard:ns,droneMetadataSection:ts,droneMetadataHeading:as,droneMetadataGrid:ss,rtkFixContainer:is,rtkFixLabel:os,rtkFixCheckbox:rs,confirmButtonContainer:ls,ratingWarningContent:cs,ratingWarningTitle:ds,ratingWarningText:us,ratingWarningButtons:gs,preprocessingProgress:ps,carouselContainer:ms,carouselImageWrapper:hs,carouselImage:fs,carouselNavigation:xs,carouselButton:vs,carouselIndicators:js,carouselIndicator:_s,carouselIndicatorActive:ws,viewImageButtonContainer:Cs},En=a.createContext(void 0),ys=({children:i})=>{const[s,o]=a.useState(""),[p,c]=a.useState(""),[d,j]=a.useState(""),[C,S]=a.useState(""),[x,l]=a.useState(""),[b,M]=a.useState(""),[P,_]=a.useState(""),[E,z]=a.useState(!1),L={search:s,srcFilter:p,catFilter:d,regionFilter:C,countryFilter:x,imageTypeFilter:b,uploadTypeFilter:P,showReferenceExamples:E,setSearch:o,setSrcFilter:c,setCatFilter:j,setRegionFilter:S,setCountryFilter:l,setImageTypeFilter:M,setUploadTypeFilter:_,setShowReferenceExamples:z,clearAllFilters:()=>{o(""),c(""),j(""),S(""),l(""),M(""),_(""),z(!1)}};return e.jsx(En.Provider,{value:L,children:i})},Ss=()=>{const i=a.useContext(En);if(i===void 0)throw new Error("useFilterContext must be used within a FilterProvider");return i};function Tn({files:i,file:s,preview:o,imageType:p,onFileChange:c,onRemoveImage:d,onAddImage:j,onImageTypeChange:C,onChangeFile:S}){const x=l=>{l.preventDefault();const b=l.dataTransfer.files?.[0];b&&c(b)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed max-w-2xl mx-auto",children:"This app evaluates how well multimodal AI models analyze and describe crisis maps and drone imagery. Upload an image and the AI will generate a description. Then you can review and rate the result based on your expertise."}),e.jsx("div",{className:t.helpLink,children:e.jsxs(zt,{to:"/help",className:t.helpLink,children:["More ",e.jsx(qt,{className:"w-3 h-3"})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(B,{withInternalPadding:!0,className:"bg-transparent border-none shadow-none",children:e.jsx(Zt,{name:"image-type",value:p,onChange:l=>C(l),options:[{key:"crisis_map",label:"Crisis Maps"},{key:"drone_image",label:"Drone Imagery"}],keySelector:l=>l.key,labelSelector:l=>l.label})})}),e.jsxs("div",{className:`${t.dropZone} ${s?t.hasFile:""}`,onDragOver:l=>l.preventDefault(),onDrop:x,children:[i.length>1?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-4",children:i.map((l,b)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(l),alt:`Image ${b+1}`,className:"w-full h-32 object-cover rounded"}),e.jsx(ln,{name:"remove-image",variant:"tertiary",onClick:()=>d(b),title:"Remove image",ariaLabel:"Remove image",className:"absolute top-2 right-2 bg-white/90 hover:bg-white shadow-md hover:shadow-lg border border-gray-200 hover:border-red-300 transition-all duration-200 backdrop-blur-sm",children:e.jsx(cn,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-xs text-center mt-1",children:l.name})]},b))}):s&&o?e.jsxs("div",{className:t.filePreview,children:[e.jsx("div",{className:t.filePreviewImage,children:e.jsx("img",{src:o,alt:"File preview"})}),e.jsx("p",{className:t.fileName,children:s.name}),e.jsxs("p",{className:t.fileInfo,children:[(s.size/1024/1024).toFixed(2)," MB"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Fn,{className:t.dropZoneIcon}),e.jsx("p",{className:t.dropZoneText,children:"Drag & Drop any file here"}),e.jsx("p",{className:t.dropZoneSubtext,children:"or"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"inline-block cursor-pointer",children:[e.jsx("input",{type:"file",className:"sr-only",accept:".jpg,.jpeg,.png,.tiff,.tif,.heic,.heif,.webp,.gif,.pdf",onChange:l=>{s&&S?S(l.target.files?.[0]):c(l.target.files?.[0])}}),e.jsx(w,{name:"upload",variant:"secondary",size:1,onClick:()=>document.querySelector('input[type="file"]')?.click(),children:s?"Change Image":"Browse Files"})]}),s&&i.length<5&&e.jsx(w,{name:"add-image",variant:"secondary",size:1,onClick:j,children:"Add Image"})]})]})]})}function Dn({files:i,imageUrl:s,preview:o,onViewFullSize:p,currentImageIndex:c=0,onGoToPrevious:d,onGoToNext:j,onGoToImage:C,showCarousel:S=!1}){return S&&i.length>1?e.jsx(B,{heading:"Uploaded Images",headingLevel:3,withHeaderBorder:!0,withInternalPadding:!0,children:e.jsxs("div",{className:t.carouselContainer,children:[e.jsx("div",{className:t.carouselImageWrapper,children:i[c]?e.jsx("img",{src:URL.createObjectURL(i[c]),alt:`Image ${c+1}`,className:t.carouselImage}):e.jsx("div",{className:t.imagePlaceholder,children:"No image available"})}),e.jsxs("div",{className:t.carouselNavigation,children:[e.jsx(w,{name:"previous-image",variant:"tertiary",size:1,onClick:d,className:t.carouselButton,children:e.jsx(Kt,{className:"w-4 h-4"})}),e.jsx("div",{className:t.carouselIndicators,children:i.map((x,l)=>e.jsx("button",{onClick:()=>C?.(l),className:`${t.carouselIndicator} ${l===c?t.carouselIndicatorActive:""}`,children:l+1},l))}),e.jsx(w,{name:"next-image",variant:"tertiary",size:1,onClick:j,className:t.carouselButton,children:e.jsx(Jt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:t.viewImageButtonContainer,children:e.jsx(w,{name:"view-full-size-carousel",variant:"secondary",size:1,onClick:()=>p({file:i[c],index:c}),disabled:!i[c],children:"View Image"})})]})}):i.length>1?e.jsx("div",{className:"space-y-6",children:i.map((x,l)=>e.jsx(B,{heading:`Image ${l+1}: ${x.name}`,headingLevel:3,withHeaderBorder:!0,withInternalPadding:!0,children:e.jsxs("div",{className:t.uploadedMapContainer,children:[e.jsx("div",{className:t.uploadedMapImage,children:e.jsx("img",{src:URL.createObjectURL(x),alt:`Image ${l+1}`})}),e.jsx("div",{className:t.viewFullSizeButton,children:e.jsx(w,{name:`view-full-size-${l}`,variant:"secondary",size:1,onClick:()=>p({file:x,index:l}),children:"View Image"})})]})},l))}):e.jsx(B,{heading:"Uploaded Image",headingLevel:3,withHeaderBorder:!0,withInternalPadding:!0,children:e.jsxs("div",{className:t.uploadedMapContainer,children:[e.jsx("div",{className:t.uploadedMapImage,children:e.jsx("img",{src:s||o||void 0,alt:"Uploaded image preview"})}),e.jsx("div",{className:t.viewFullSizeButton,children:e.jsx(w,{name:"view-full-size",variant:"secondary",size:1,onClick:()=>p(),children:"View Image"})})]})})}function bs({files:i,imageType:s,title:o,source:p,eventType:c,epsg:d,countries:j,centerLon:C,centerLat:S,amslM:x,aglM:l,headingDeg:b,yawDeg:M,pitchDeg:P,rollDeg:_,rtkFix:E,stdHM:z,stdVM:A,metadataArray:L,sources:W,types:G,spatialReferences:V,imageTypes:R,countriesOptions:K,onTitleChange:Y,onSourceChange:ne,onEventTypeChange:q,onEpsgChange:te,onCountriesChange:ae,onCenterLonChange:se,onCenterLatChange:ie,onAmslMChange:oe,onAglMChange:re,onHeadingDegChange:le,onYawDegChange:ce,onPitchDegChange:de,onRollDegChange:ue,onRtkFixChange:ge,onStdHMChange:pe,onStdVMChange:me,onImageTypeChange:he,updateMetadataForImage:F}){return i.length>1?e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(D,{label:"Shared Title",name:"title",value:o,onChange:Y,placeholder:"Enter a title for all images...",required:!0})}),i.map((N,m)=>e.jsx("div",{className:"mb-6",children:e.jsx(B,{heading:`Image ${m+1}: ${N.name}`,headingLevel:4,withHeaderBorder:!0,withInternalPadding:!0,children:e.jsxs("div",{className:t.formGrid,children:[s!=="drone_image"&&e.jsx(Z,{label:"Source",name:`source_${m}`,value:L[m]?.source||"",onChange:h=>F(m,"source",h),options:W,keySelector:h=>h.s_code,labelSelector:h=>h.label,required:!0}),e.jsx(Z,{label:"Event Type",name:`event_type_${m}`,value:L[m]?.eventType||"",onChange:h=>F(m,"eventType",h),options:G,keySelector:h=>h.t_code,labelSelector:h=>h.label,required:s!=="drone_image"}),e.jsx(Z,{label:"EPSG",name:`epsg_${m}`,value:L[m]?.epsg||"",onChange:h=>F(m,"epsg",h),options:V,keySelector:h=>h.epsg,labelSelector:h=>`${h.srid} (EPSG:${h.epsg})`,placeholder:"EPSG",required:s!=="drone_image"}),e.jsx(Mn,{label:"Countries (optional)",name:`countries_${m}`,value:L[m]?.countries||[],onChange:h=>F(m,"countries",h),options:K,keySelector:h=>h.c_code,labelSelector:h=>h.label,placeholder:"Select one or more"}),s==="drone_image"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.droneMetadataSection,children:[e.jsx("h4",{className:t.droneMetadataHeading,children:"Drone Flight Data"}),e.jsxs("div",{className:t.droneMetadataGrid,children:[e.jsx(D,{label:"Center Longitude",name:`center_lon_${m}`,value:L[m]?.centerLon||"",onChange:h=>F(m,"centerLon",h),placeholder:"e.g., -122.4194",step:"any"}),e.jsx(D,{label:"Center Latitude",name:`center_lat_${m}`,value:L[m]?.centerLat||"",onChange:h=>F(m,"centerLat",h),placeholder:"e.g., 37.7749",step:"any"}),e.jsx(D,{label:"Altitude AMSL (m)",name:`amsl_m_${m}`,value:L[m]?.amslM||"",onChange:h=>F(m,"amslM",h),placeholder:"e.g., 100.5",step:"any"}),e.jsx(D,{label:"Altitude AGL (m)",name:`agl_m_${m}`,value:L[m]?.aglM||"",onChange:h=>F(m,"aglM",h),placeholder:"e.g., 50.2",step:"any"}),e.jsx(D,{label:"Heading (degrees)",name:`heading_deg_${m}`,value:L[m]?.headingDeg||"",onChange:h=>F(m,"headingDeg",h),placeholder:"e.g., 180.0",step:"any"}),e.jsx(D,{label:"Yaw (degrees)",name:`yaw_deg_${m}`,value:L[m]?.yawDeg||"",onChange:h=>F(m,"yawDeg",h),placeholder:"e.g., 90.0",step:"any"}),e.jsx(D,{label:"Pitch (degrees)",name:`pitch_deg_${m}`,value:L[m]?.pitchDeg||"",onChange:h=>F(m,"pitchDeg",h),placeholder:"e.g., 0.0",step:"any"}),e.jsx(D,{label:"Roll (degrees)",name:`roll_deg_${m}`,value:L[m]?.rollDeg||"",onChange:h=>F(m,"rollDeg",h),placeholder:"e.g., 0.0",step:"any"}),e.jsx("div",{className:t.rtkFixContainer,children:e.jsxs("label",{className:t.rtkFixLabel,children:[e.jsx("input",{type:"checkbox",checked:L[m]?.rtkFix||!1,onChange:h=>F(m,"rtkFix",h.target.checked),className:t.rtkFixCheckbox}),"RTK Fix Available"]})}),e.jsx(D,{label:"Horizontal Std Dev (m)",name:`std_h_m_${m}`,value:L[m]?.stdHM||"",onChange:h=>F(m,"stdHM",h),placeholder:"e.g., 0.1",step:"any"}),e.jsx(D,{label:"Vertical Std Dev (m)",name:`std_v_m_${m}`,value:L[m]?.stdVM||"",onChange:h=>F(m,"stdVM",h),placeholder:"e.g., 0.2",step:"any"})]})]})})]})})},m))]}):e.jsxs("div",{className:t.formGrid,children:[e.jsx("div",{className:t.titleField,children:e.jsx(D,{label:"Title",name:"title",value:o,onChange:Y,placeholder:"Enter a title for this map...",required:!0})}),s!=="drone_image"&&e.jsx(Z,{label:"Source",name:"source",value:p,onChange:ne,options:W,keySelector:N=>N.s_code,labelSelector:N=>N.label,required:!0}),e.jsx(Z,{label:"Event Type",name:"event_type",value:c,onChange:q,options:G,keySelector:N=>N.t_code,labelSelector:N=>N.label,required:s!=="drone_image"}),e.jsx(Z,{label:"EPSG",name:"epsg",value:d,onChange:te,options:V,keySelector:N=>N.epsg,labelSelector:N=>`${N.srid} (EPSG:${N.epsg})`,placeholder:"EPSG",required:s!=="drone_image"}),e.jsx(Z,{label:"Image Type",name:"image_type",value:s,onChange:he,options:R,keySelector:N=>N.image_type,labelSelector:N=>N.label,required:!0}),e.jsx(Mn,{label:"Countries (optional)",name:"countries",value:j,onChange:ae,options:K,keySelector:N=>N.c_code,labelSelector:N=>N.label,placeholder:"Select one or more"}),s==="drone_image"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.droneMetadataSection,children:[e.jsx("h4",{className:t.droneMetadataHeading,children:"Drone Flight Data"}),e.jsxs("div",{className:t.droneMetadataGrid,children:[e.jsx(D,{label:"Center Longitude",name:"center_lon",value:C,onChange:se,placeholder:"e.g., -122.4194",step:"any"}),e.jsx(D,{label:"Center Latitude",name:"center_lat",value:S,onChange:ie,placeholder:"e.g., 37.7749",step:"any"}),e.jsx(D,{label:"Altitude AMSL (m)",name:"amsl_m",value:x,onChange:oe,placeholder:"e.g., 100.5",step:"any"}),e.jsx(D,{label:"Altitude AGL (m)",name:"agl_m",value:l,onChange:re,placeholder:"e.g., 50.2",step:"any"}),e.jsx(D,{label:"Heading (degrees)",name:"heading_deg",value:b,onChange:le,placeholder:"e.g., 180.0",step:"any"}),e.jsx(D,{label:"Yaw (degrees)",name:"yaw_deg",value:M,onChange:ce,placeholder:"e.g., 90.0",step:"any"}),e.jsx(D,{label:"Pitch (degrees)",name:"pitch_deg",value:P,onChange:de,placeholder:"e.g., 0.0",step:"any"}),e.jsx(D,{label:"Roll (degrees)",name:"roll_deg",value:_,onChange:ue,placeholder:"e.g., 0.0",step:"any"}),e.jsx("div",{className:t.rtkFixContainer,children:e.jsxs("label",{className:t.rtkFixLabel,children:[e.jsx("input",{type:"checkbox",checked:E,onChange:N=>ge(N.target.checked),className:t.rtkFixCheckbox}),"RTK Fix Available"]})}),e.jsx(D,{label:"Horizontal Std Dev (m)",name:"std_h_m",value:z,onChange:pe,placeholder:"e.g., 0.1",step:"any"}),e.jsx(D,{label:"Vertical Std Dev (m)",name:"std_v_m",value:A,onChange:me,placeholder:"e.g., 0.2",step:"any"})]})]})})]})}function Ns({isPerformanceConfirmed:i,scores:s,onScoreChange:o,onConfirmRatings:p,onEditRatings:c}){return i?null:e.jsx(B,{heading:"AI Performance Rating",headingLevel:3,withHeaderBorder:!0,withInternalPadding:!0,children:e.jsxs("div",{className:t.ratingContent,children:[e.jsx("p",{className:t.ratingDescription,children:"How well did the AI perform on the task?"}),["accuracy","context","usability"].map(d=>e.jsxs("div",{className:t.ratingSlider,children:[e.jsx("label",{className:t.ratingLabel,children:d}),e.jsx("input",{type:"range",min:0,max:100,value:s[d],onChange:j=>o(d,Number(j.target.value)),className:t.ratingInput}),e.jsx("span",{className:t.ratingValue,children:s[d]})]},d)),e.jsx("div",{className:t.confirmButtonContainer,children:e.jsx(w,{name:"confirm-ratings",variant:"secondary",onClick:p,children:"Confirm Ratings"})})]})})}function ks({description:i,analysis:s,recommendedActions:o,onDescriptionChange:p,onAnalysisChange:c,onRecommendedActionsChange:d,onBack:j,onDelete:C,onSubmit:S,onEditRatings:x,isPerformanceConfirmed:l=!1}){const b=M=>{if(M){const P=M.split(`
`),_=P.findIndex(A=>A.startsWith("Description:")),E=P.findIndex(A=>A.startsWith("Analysis:")),z=P.findIndex(A=>A.startsWith("Recommended Actions:"));_!==-1&&E!==-1&&z!==-1&&(p(P.slice(_+1,E).join(`
`).trim()),c(P.slice(E+1,z).join(`
`).trim()),d(P.slice(z+1).join(`
`).trim()))}};return e.jsxs(B,{heading:"Generated Text",headingLevel:3,withHeaderBorder:!0,withInternalPadding:!0,children:[e.jsx("div",{className:"text-left space-y-4",children:e.jsx("div",{children:e.jsx(Qt,{name:"generatedContent",value:`Description:
${i||"AI-generated description will appear here..."}

Analysis:
${s||"AI-generated analysis will appear here..."}

Recommended Actions:
${o||"AI-generated recommended actions will appear here..."}`,onChange:b,rows:12,placeholder:"AI-generated content will appear here..."})})}),e.jsxs("div",{className:t.submitSection,children:[e.jsx(w,{name:"back",variant:"secondary",onClick:j,children:"Back"}),l&&x&&e.jsx(w,{name:"edit-ratings",variant:"secondary",onClick:x,children:"Edit Ratings"}),e.jsx(ln,{name:"delete",variant:"tertiary",onClick:C,title:"Delete",ariaLabel:"Delete uploaded image",children:e.jsx(cn,{})}),e.jsx(w,{name:"submit",onClick:S,children:"Submit"})]})]})}function Is({isOpen:i,imageUrl:s,preview:o,selectedImageData:p,onClose:c}){if(!i)return null;let d,j;return p?(d=URL.createObjectURL(p.file),j=`Image ${p.index+1}: ${p.file.name}`):(d=s||o||void 0,j="Full size map"),e.jsx("div",{className:t.fullSizeModalOverlay,onClick:c,children:e.jsxs("div",{className:t.fullSizeModalContent,onClick:C=>C.stopPropagation(),children:[e.jsx("div",{className:t.fullSizeModalHeader,children:e.jsx(w,{name:"close-modal",variant:"tertiary",size:1,onClick:c,children:"✕"})}),e.jsx("div",{className:t.fullSizeModalImage,children:e.jsx("img",{src:d,alt:j})})]})})}function Ms({isOpen:i,onClose:s}){return i?e.jsx("div",{className:t.fullSizeModalOverlay,onClick:s,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"Please Confirm Your Ratings"}),e.jsx("p",{className:t.ratingWarningText,children:'You must confirm your performance ratings before submitting. Please go back to the rating section and click "Confirm Ratings".'}),e.jsx("div",{className:t.ratingWarningButtons,children:e.jsx(w,{name:"close-warning",variant:"secondary",onClick:s,children:"Close"})})]})})}):null}function Ls({isOpen:i,onConfirm:s,onCancel:o}){return i?e.jsx("div",{className:t.fullSizeModalOverlay,onClick:o,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"Delete Image?"}),e.jsx("p",{className:t.ratingWarningText,children:"This action cannot be undone. Are you sure you want to delete this uploaded image?"}),e.jsxs("div",{className:t.ratingWarningButtons,children:[e.jsx(w,{name:"confirm-delete",variant:"secondary",onClick:s,children:"Delete"}),e.jsx(w,{name:"cancel-delete",variant:"tertiary",onClick:o,children:"Cancel"})]})]})})}):null}function Ts({isOpen:i,onConfirm:s,onCancel:o}){return i?e.jsx("div",{className:t.fullSizeModalOverlay,onClick:o,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"Leave Page?"}),e.jsx("p",{className:t.ratingWarningText,children:"Your uploaded image will be deleted if you leave this page. Are you sure you want to continue?"}),e.jsxs("div",{className:t.ratingWarningButtons,children:[e.jsx(w,{name:"confirm-navigation",variant:"secondary",onClick:s,children:"Leave Page"}),e.jsx(w,{name:"cancel-navigation",variant:"tertiary",onClick:o,children:"Stay"})]})]})})}):null}function Ds({isOpen:i,fallbackInfo:s,onClose:o}){return!i||!s?null:e.jsx("div",{className:t.fullSizeModalOverlay,onClick:o,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"Model Changed"}),e.jsxs("p",{className:t.ratingWarningText,children:[s.originalModel," is currently unavailable. We've automatically switched to ",s.fallbackModel," to complete your request."]}),e.jsx("div",{className:t.ratingWarningButtons,children:e.jsx(w,{name:"close-fallback",variant:"secondary",onClick:o,children:"Got it"})})]})})})}function Ps({isOpen:i,preprocessingInfo:s,onClose:o}){return!i||!s?null:e.jsx("div",{className:t.fullSizeModalOverlay,onClick:o,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"File Converted"}),e.jsxs("p",{className:t.ratingWarningText,children:["Your file ",e.jsx("strong",{children:s.original_filename})," has been converted from",e.jsxs("strong",{children:[" ",s.original_mime_type]})," to",e.jsxs("strong",{children:[" ",s.processed_mime_type]})," for optimal processing.",e.jsx("br",{}),e.jsx("br",{}),"This conversion ensures your file is in the best format for our AI models to analyze."]}),e.jsx("div",{className:t.ratingWarningButtons,children:e.jsx(w,{name:"close-preprocessing",variant:"secondary",onClick:o,children:"Got it"})})]})})})}function Fs({isOpen:i,preprocessingFile:s,isPreprocessing:o,preprocessingProgress:p,onConfirm:c,onCancel:d}){return i?e.jsx("div",{className:t.fullSizeModalOverlay,onClick:o?void 0:d,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:j=>j.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"File Conversion Required"}),e.jsx("p",{className:t.ratingWarningText,children:"The file you selected will be converted to PNG format. This ensures optimal compatibility and processing by our AI models."}),!o&&e.jsxs("div",{className:t.ratingWarningButtons,children:[e.jsx(w,{name:"confirm-preprocessing",variant:"secondary",onClick:c,children:"Convert File"}),e.jsx(w,{name:"cancel-preprocessing",variant:"tertiary",onClick:d,children:"Cancel"})]}),o&&e.jsxs("div",{className:t.preprocessingProgress,children:[e.jsx("p",{children:p}),e.jsx(on,{className:"text-ifrcRed"})]})]})})}):null}function Es({isOpen:i,unsupportedFile:s,onClose:o}){return!i||!s?null:e.jsx("div",{className:t.fullSizeModalOverlay,onClick:o,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"Unsupported File Format"}),e.jsxs("p",{className:t.ratingWarningText,children:["The file ",e.jsx("strong",{children:s.name})," is not supported for upload.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Supported formats:"}),e.jsx("br",{}),"• Images: JPEG, PNG, TIFF, HEIC, WebP, GIF",e.jsx("br",{}),"• Documents: PDF (will be converted to image)",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Recommendation:"})," Convert your file to JPEG or PNG format for best compatibility."]}),e.jsx("div",{className:t.ratingWarningButtons,children:e.jsx(w,{name:"close-unsupported",variant:"secondary",onClick:o,children:"Got it"})})]})})})}function Rs({isOpen:i,oversizedFile:s,onClose:o,onCancel:p}){return!i||!s?null:e.jsx("div",{className:t.lightModalOverlay,onClick:p,children:e.jsx("div",{className:t.fullSizeModalContent,onClick:c=>c.stopPropagation(),children:e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"File Size Warning"}),e.jsxs("p",{className:t.ratingWarningText,children:["The file ",e.jsx("strong",{children:s.name})," is large (",(s.size/(1024*1024)).toFixed(1),"MB).",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Warning:"})," This file size might exceed the limits of the AI models we use.",e.jsx("br",{}),e.jsx("br",{}),"You can still proceed, but consider using a smaller file if you encounter issues."]}),e.jsxs("div",{className:t.ratingWarningButtons,children:[e.jsx(w,{name:"continue-size-warning",variant:"secondary",onClick:o,children:"Continue"}),e.jsx(w,{name:"cancel-size-warning",variant:"tertiary",onClick:p,children:"Cancel"})]})]})})})}const De="selectedVlmModel";function Pn(){const[i]=At(),s=dn(),[o,p]=a.useState(1),[c,d]=a.useState(!1),[j,C]=a.useState(!1),S=a.useRef(o),x=a.useRef(null),[l,b]=a.useState(null),[M,P]=a.useState(null),[_,E]=a.useState([]),[z,A]=a.useState(""),[L,W]=a.useState(""),[G,V]=a.useState(""),[R,K]=a.useState("crisis_map"),[Y,ne]=a.useState([]),[q,te]=a.useState(""),[ae,se]=a.useState(""),[ie,oe]=a.useState(""),[re,le]=a.useState(""),[ce,de]=a.useState(""),[ue,ge]=a.useState(""),[pe,me]=a.useState(""),[he,F]=a.useState(""),[N,m]=a.useState(""),[h,Fe]=a.useState(!1),[Ee,Re]=a.useState(""),[ze,Ae]=a.useState(""),[$e,Ce]=a.useState([]),[Rn,zn]=a.useState([]),[An,$n]=a.useState([]),[On,Bn]=a.useState([]),[Un,Hn]=a.useState([]),[Wn,Gn]=a.useState([]),[U,ye]=a.useState(null),[Oe,J]=a.useState([]),[Se,un]=a.useState(null),[Vn,gn]=a.useState(""),[pn,Be]=a.useState(""),[mn,Ue]=a.useState(""),[hn,He]=a.useState(""),[be,fn]=a.useState({accuracy:50,context:50,usability:50}),[Yn,We]=a.useState(!1),[qn,Ge]=a.useState(null),[fe,Ne]=a.useState(!1),[Zn,xn]=a.useState(!1),[Kn,Ve]=a.useState(!1),[Jn,ke]=a.useState(!1),[Ye,qe]=a.useState(null),[Qn,Ze]=a.useState(!1),[Xn,vn]=a.useState(null),[et,Ke]=a.useState(!1),[nt,jn]=a.useState(null),[tt,Q]=a.useState(!1),[Je,X]=a.useState(null),[at,xe]=a.useState(!1),[st,H]=a.useState(""),[it,Ie]=a.useState(!1),[ot,Qe]=a.useState(null),[rt,ve]=a.useState(!1),[lt,Xe]=a.useState(null),[ct,Me]=a.useState(0);S.current=o,x.current=U;const dt=n=>A(n||""),ut=n=>W(n||""),gt=n=>V(n||""),en=n=>K(n||""),pt=n=>ne(Array.isArray(n)?n:[]),mt=n=>se(n||""),ht=n=>oe(n||""),ft=n=>le(n||""),xt=n=>de(n||""),vt=n=>ge(n||""),jt=n=>me(n||""),_t=n=>F(n||""),wt=n=>m(n||""),Ct=n=>Fe(n||!1),yt=n=>Re(n||""),St=n=>Ae(n||""),Le=n=>p(n),bt=a.useCallback(()=>{_.length>1&&Me(n=>n>0?n-1:_.length-1)},[_.length]),Nt=a.useCallback(()=>{_.length>1&&Me(n=>n<_.length-1?n+1:0)},[_.length]),kt=a.useCallback(n=>{n>=0&&n<_.length&&Me(n)},[_.length]),_n=()=>{if(_.length<5){const n=document.createElement("input");n.type="file",n.accept=".jpg,.jpeg,.png,.tiff,.tif,.heic,.heif,.webp,.gif,.pdf",n.onchange=f=>{const u=f.target;if(u.files&&u.files[0]){const g=u.files[0];nn(g)}},n.click()}},wn=n=>{E(f=>{const u=f.filter((g,r)=>r!==n);return u.length===1?P(u[0]):u.length===0&&P(null),u}),Ce(f=>f.filter((u,g)=>g!==n))},It=(n,f,u)=>{Ce(g=>{const r=[...g];return r[n]||(r[n]={source:"",eventType:"",epsg:"",countries:[],centerLon:"",centerLat:"",amslM:"",aglM:"",headingDeg:"",yawDeg:"",pitchDeg:"",rollDeg:"",rtkFix:!1,stdHM:"",stdVM:""}),r[n]={...r[n],[f]:u},r})},Cn=n=>{const f=["image/jpeg","image/jpg","image/png"],u=[".jpg",".jpeg",".png"];let g=!f.includes(n.type);if(!g&&n.name){const r=n.name.toLowerCase().substring(n.name.lastIndexOf("."));g=!u.includes(r)}return g},yn=n=>{const f=["text/html","text/css","application/javascript","application/json","text/plain","application/xml","text/xml","application/zip","application/x-zip-compressed","application/x-rar-compressed","application/x-7z-compressed","audio/","video/","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];for(const u of f)if(n.type.startsWith(u))return!0;if(n.name){const u=n.name.toLowerCase().substring(n.name.lastIndexOf("."));if([".html",".htm",".css",".js",".json",".txt",".xml",".zip",".rar",".7z",".csv",".xlsx",".xls",".pptx",".ppt",".docx",".doc",".mp3",".mp4",".avi",".mov"].includes(u))return!0}return!1},nn=n=>{if(n){if(console.log("File selected:",n.name,"Type:",n.type,"Size:",n.size),n.size/(1024*1024)>5&&(console.log("File too large, showing size warning modal"),Xe(n),ve(!0)),yn(n)){console.log("File format not supported at all, showing unsupported format modal"),Qe(n),Ie(!0);return}Cn(n)?(console.log("File needs preprocessing, showing modal"),X(n),Q(!0)):(console.log("File does not need preprocessing, setting directly"),_.length===0?(P(n),E([n])):E(u=>[...u,n]))}},Sn=n=>{if(n){if(console.log("File changed:",n.name,"Type:",n.type,"Size:",n.size),n.size/(1024*1024)>5&&(console.log("File too large, showing size warning modal"),Xe(n),ve(!0)),yn(n)){console.log("File format not supported at all, showing unsupported format modal"),Qe(n),Ie(!0);return}Cn(n)?(console.log("File needs preprocessing, showing modal"),X(n),Q(!0)):(console.log("File does not need preprocessing, replacing last file"),_.length>1?(E(u=>{const g=[...u];return g[g.length-1]=n,g}),_.length===1&&P(n)):(P(n),E([n])))}};async function je(n){const f=await n.text();try{return f?JSON.parse(f):{}}catch{return{error:f}}}function tn(n,f){const u=n instanceof Error?n.message:`Failed to ${f.toLowerCase()}`;alert(u)}async function bn(){if(_.length!==0){d(!0);try{_.length===1?await Mt():await Lt()}catch(n){tn(n,"Upload")}finally{d(!1)}}}async function Mt(){console.log("DEBUG: Starting single image upload");const n=new FormData;n.append("file",_[0]),n.append("title",q),n.append("image_type",R),z&&n.append("source",z),L&&n.append("event_type",L),G&&n.append("epsg",G),Y.length>0&&Y.forEach(r=>n.append("countries",r)),R==="drone_image"&&(ae&&n.append("center_lon",ae),ie&&n.append("center_lat",ie),re&&n.append("amsl_m",re),ce&&n.append("agl_m",ce),ue&&n.append("heading_deg",ue),pe&&n.append("yaw_deg",pe),he&&n.append("pitch_deg",he),N&&n.append("roll_deg",N),h&&n.append("rtk_fix",h.toString()),Ee&&n.append("std_h_m",Ee),ze&&n.append("std_v_m",ze));const f=localStorage.getItem(De);f&&n.append("model_name",f);const u=await fetch("/api/images/",{method:"POST",body:n}),g=await je(u);if(!u.ok)throw new Error(g.error||"Upload failed");console.log("DEBUG: Single upload response:",g),await Nn(g,!1)}async function Lt(){console.log("DEBUG: Starting multi-image upload");const n=new FormData;_.forEach(r=>n.append("files",r)),n.append("title",q),n.append("image_type",R),$e.forEach((r,v)=>{r.source&&n.append(`source_${v}`,r.source),r.eventType&&n.append(`event_type_${v}`,r.eventType),r.epsg&&n.append(`epsg_${v}`,r.epsg),r.countries.length>0&&r.countries.forEach(T=>n.append(`countries_${v}`,T)),R==="drone_image"&&(r.centerLon&&n.append(`center_lon_${v}`,r.centerLon),r.centerLat&&n.append(`center_lat_${v}`,r.centerLat),r.amslM&&n.append(`amsl_m_${v}`,r.amslM),r.aglM&&n.append(`agl_m_${v}`,r.aglM),r.headingDeg&&n.append(`heading_deg_${v}`,r.headingDeg),r.yawDeg&&n.append(`yaw_deg_${v}`,r.yawDeg),r.pitchDeg&&n.append(`pitch_deg_${v}`,r.pitchDeg),r.rollDeg&&n.append(`roll_deg_${v}`,r.rollDeg),r.rtkFix&&n.append(`rtk_fix_${v}`,r.rtkFix.toString()),r.stdHM&&n.append(`std_h_m_${v}`,r.stdHM),r.stdVM&&n.append(`std_v_m_${v}`,r.stdVM))});const f=localStorage.getItem(De);f&&n.append("model_name",f);const u=await fetch("/api/images/multi",{method:"POST",body:n}),g=await je(u);if(!u.ok)throw new Error(g.error||"Upload failed");console.log("DEBUG: Multi upload response:",g),await Nn(g,!0)}async function Nn(n,f){un(n.image_url),n.preprocessing_info&&typeof n.preprocessing_info=="object"&&"was_preprocessed"in n.preprocessing_info&&n.preprocessing_info.was_preprocessed===!0&&(jn(n.preprocessing_info),Ke(!0));const u=n.image_id;if(!u)throw new Error("Upload failed: image_id not found");if(ye(u),f)if(n.image_ids&&Array.isArray(n.image_ids)){const y=n.image_ids;console.log("DEBUG: Storing image IDs for multi-upload:",y),J(y)}else console.log("DEBUG: Multi-upload but no image_ids found, using single ID"),J([u]);else console.log("DEBUG: Storing single image ID:",u),J([u]);const g=n,r=g.raw_json?.fallback_info;r&&(vn({originalModel:r.original_model,fallbackModel:r.fallback_model,reason:r.reason}),Ze(!0));const v=g.raw_json?.metadata;if(v){const y=v.metadata||v;if(y&&typeof y=="object"){const $=[];if(f){const k=y.metadata_images;if(k&&typeof k=="object")for(let O=1;O<=_.length;O++){const _e=`image${O}`,an=k[_e];if(an&&typeof an=="object"){const we=an;$.push({source:we.source||"",eventType:we.type||"",epsg:we.epsg||"",countries:Array.isArray(we.countries)?we.countries:[],centerLon:"",centerLat:"",amslM:"",aglM:"",headingDeg:"",yawDeg:"",pitchDeg:"",rollDeg:"",rtkFix:!1,stdHM:"",stdVM:""})}else $.push({source:"",eventType:"",epsg:"",countries:[],centerLon:"",centerLat:"",amslM:"",aglM:"",headingDeg:"",yawDeg:"",pitchDeg:"",rollDeg:"",rtkFix:!1,stdHM:"",stdVM:""})}else{const O={source:y.source||"",eventType:y.type||"",epsg:y.epsg||"",countries:Array.isArray(y.countries)?y.countries:[],centerLon:"",centerLat:"",amslM:"",aglM:"",headingDeg:"",yawDeg:"",pitchDeg:"",rollDeg:"",rtkFix:!1,stdHM:"",stdVM:""};for(let _e=0;_e<_.length;_e++)$.push({...O})}}else{const k={source:y.source||"",eventType:y.type||"",epsg:y.epsg||"",countries:Array.isArray(y.countries)?y.countries:[],centerLon:"",centerLat:"",amslM:"",aglM:"",headingDeg:"",yawDeg:"",pitchDeg:"",rollDeg:"",rtkFix:!1,stdHM:"",stdVM:""};$.push(k)}if(Ce($),$.length>0){const k=$[0];if(y&&typeof y=="object"){const O=y.title;O&&te(O||"")}A(k.source||""),W(k.eventType||""),V(k.epsg||""),ne(k.countries||[]),R==="drone_image"&&(se(k.centerLon||""),oe(k.centerLat||""),le(k.amslM||""),de(k.aglM||""),ge(k.headingDeg||""),me(k.yawDeg||""),F(k.pitchDeg||""),m(k.rollDeg||""),Fe(k.rtkFix||!1),Re(k.stdHM||""),Ae(k.stdVM||""))}}}const T=g.raw_json?.metadata;T&&(T.description&&Be(T.description),T.analysis&&Ue(T.analysis),T.recommended_actions&&He(T.recommended_actions)),g.generated&&gn(g.generated),Le("2a")}async function Tt(){if(console.log("handleSubmit called with:",{uploadedImageId:U,title:q,draft:Vn}),!U)return alert("No image to submit");if(!fe){xn(!0);return}try{const n=Oe.length>0?Oe:[U];console.log("DEBUG: Submit - Using image IDs:",n),console.log("DEBUG: Submit - uploadedImageIds:",Oe),console.log("DEBUG: Submit - uploadedImageId:",U);for(let v=0;v<n.length;v++){const T=n[v],y=$e[v]||{source:z||"OTHER",eventType:L||"OTHER",epsg:G||"OTHER",countries:Y||[]},$={source:R==="drone_image"?void 0:y.source||"OTHER",event_type:y.eventType||"OTHER",epsg:y.epsg||"OTHER",image_type:R,countries:y.countries||[]};console.log(`Updating metadata for image ${v+1}:`,$);const k=await fetch(`/api/images/${T}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($)}),O=await je(k);if(!k.ok)throw new Error(O.error||`Metadata update failed for image ${v+1}`)}const f=`Description: ${pn}

Analysis: ${mn}

Recommended Actions: ${hn}`,u={title:q,edited:f,accuracy:be.accuracy,context:be.context,usability:be.usability};console.log("Updating caption:",u);const g=await fetch(`/api/images/${U}/caption`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),r=await je(g);if(!g.ok)throw new Error(r.error||"Caption update failed");ye(null),J([]),Le(3)}catch(n){tn(n,"Submit")}}async function kn(){if(console.log("handleDelete called with uploadedImageId:",U),!U){alert("No image to delete. Please try refreshing the page.");return}Ve(!0)}async function Dt(){try{console.log("Deleting image with ID:",U);const n=await fetch(`/api/images/${U}`,{method:"DELETE"});if(!n.ok){const f=await je(n);throw new Error(f.error||`Delete failed with status ${n.status}`)}Ve(!1),In()}catch(n){tn(n,"Delete")}}const In=()=>{Ne(!1),p(1),P(null),E([]),b(null),ye(null),J([]),un(null),te(""),A(""),W(""),V(""),ne([]),se(""),oe(""),le(""),de(""),ge(""),me(""),F(""),m(""),Fe(!1),Re(""),Ae(""),fn({accuracy:50,context:50,usability:50}),gn(""),Be(""),Ue(""),He(""),Ce([]),Ze(!1),vn(null),Ke(!1),jn(null),Q(!1),X(null),xe(!1),H(""),Ie(!1),Qe(null),ve(!1),Xe(null),s("/upload",{replace:!0})},Te=a.useCallback(n=>{n==="/upload"||n==="/"||(x.current?(qe(n),ke(!0)):s(n))},[s]);async function Pt(){if(Ye&&x.current)try{await fetch(`/api/images/${x.current}`,{method:"DELETE"}),ke(!1),qe(null),s(Ye)}catch(n){console.error("Failed to delete image before navigation:",n),ke(!1),qe(null),s(Ye)}}const Ft=async()=>{if(Je){xe(!0),H("Starting file conversion...");try{const n=new FormData;n.append("file",Je),n.append("preprocess_only","true"),H("Converting file format...");const f=await fetch("/api/images/preprocess",{method:"POST",body:n});if(!f.ok)throw new Error("Preprocessing failed");const u=await f.json();H("Finalizing conversion...");const g=atob(u.processed_content),r=new Uint8Array(g.length);for(let y=0;y<g.length;y++)r[y]=g.charCodeAt(y);const v=new File([r],u.processed_filename,{type:u.processed_mime_type}),T=URL.createObjectURL(v);_.length===0?(P(v),E([v])):E(y=>[...y,v]),b(T),H("Conversion complete!"),setTimeout(()=>{Q(!1),X(null),xe(!1),H("")},1e3)}catch(n){console.error("Preprocessing error:",n),H("Conversion failed. Please try again."),setTimeout(()=>{Q(!1),X(null),xe(!1),H("")},2e3)}}},Et=()=>{Q(!1),X(null),xe(!1),H("")},Rt=async n=>{C(!0);try{const f=n.map(async v=>{const T=await fetch(`/api/images/${v}`);if(!T.ok)throw new Error(`Failed to fetch image ${v}`);const y=await T.json(),$=await fetch(`/api/images/${v}/file`);if(!$.ok)throw new Error(`Failed to fetch image file ${v}`);const k=await $.blob(),O=y.file_key.split("/").pop()||`contributed_${v}.png`;return{file:new File([k],O,{type:k.type}),imageData:y}}),u=await Promise.all(f),g=u.map(v=>v.file),r=u[0]?.imageData;E(g),J(n),n.length===1&&ye(n[0]),g.length>=1&&P(g[0]),r?.image_type&&K(r.image_type)}catch(f){console.error("Failed to fetch contributed images:",f),alert(`Failed to load contributed images: ${f instanceof Error?f.message:"Unknown error"}`)}finally{C(!1)}};return a.useEffect(()=>{Promise.all([fetch("/api/sources").then(n=>n.json()),fetch("/api/types").then(n=>n.json()),fetch("/api/spatial-references").then(n=>n.json()),fetch("/api/image-types").then(n=>n.json()),fetch("/api/countries").then(n=>n.json()),fetch("/api/models").then(n=>n.json())]).then(([n,f,u,g,r,v])=>{!localStorage.getItem(De)&&v?.length&&localStorage.setItem(De,v[0].m_code),zn(n),$n(f),Bn(u),Hn(g),Gn(r),n.length>0&&A(n[0].s_code),W("OTHER"),V("OTHER"),g.length>0&&!i.get("imageType")&&!R&&K(g[0].image_type)})},[i,R]),a.useEffect(()=>(window.confirmNavigationIfNeeded=n=>{Te(n)},()=>{delete window.confirmNavigationIfNeeded}),[Te]),a.useEffect(()=>{const n=g=>{if(x.current){const r="You have an uploaded image that will be deleted if you leave this page. Are you sure you want to leave?";return g.preventDefault(),g.returnValue=r,r}},f=()=>{x.current&&fetch(`/api/images/${x.current}`,{method:"DELETE"}).catch(console.error)},u=g=>{const r=g.target,v=r.closest("a[href]")||r.closest("[data-navigate]");if(v&&x.current){const T=v.getAttribute("href")||v.getAttribute("data-navigate");T&&T!=="#"&&!T.startsWith("javascript:")&&!T.startsWith("mailto:")&&(g.preventDefault(),g.stopPropagation(),Te(T))}};return window.addEventListener("beforeunload",n),document.addEventListener("click",u,!0),()=>{window.removeEventListener("beforeunload",n),document.removeEventListener("click",u,!0),f()}},[Te]),a.useEffect(()=>{if(!M){b(null);return}const n=URL.createObjectURL(M);return b(n),()=>URL.revokeObjectURL(n)},[M]),a.useEffect(()=>{const n=i.get("contribute"),f=i.get("imageIds");if(n==="true"&&f){const u=f.split(",").filter(g=>g.trim());u.length>0&&Rt(u)}},[i]),a.useEffect(()=>{o==="2b"&&Me(0)},[o]),e.jsxs(rn,{children:[o!==3&&e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:t.uploadContainer,"data-step":o,children:[o===1&&!i.get("step")&&!j&&e.jsx(Tn,{files:_,file:M,preview:l,imageType:R,onFileChange:nn,onRemoveImage:wn,onAddImage:_n,onImageTypeChange:en,onChangeFile:Sn}),o===1&&i.get("contribute")==="true"&&!j&&_.length>0&&e.jsx(Tn,{files:_,file:M,preview:l,imageType:R,onFileChange:nn,onRemoveImage:wn,onAddImage:_n,onImageTypeChange:en,onChangeFile:Sn}),c&&e.jsxs("div",{className:t.loadingContainer,children:[e.jsx(on,{className:"text-ifrcRed"}),e.jsx("p",{className:t.loadingText,children:"Generating..."})]}),j&&e.jsxs("div",{className:t.loadingContainer,children:[e.jsx(on,{className:"text-ifrcRed"}),e.jsx("p",{className:t.loadingText,children:"Loading contribution..."})]}),(o===1&&!c&&!j||o===1&&i.get("contribute")==="true"&&!c&&!j&&_.length>0)&&e.jsx("div",{className:t.generateButtonContainer,children:Se?e.jsx(w,{name:"generate-from-url",onClick:bn,children:"Generate Caption"}):e.jsx(w,{name:"generate",disabled:_.length===0,onClick:bn,children:"Generate"})}),o==="2a"&&e.jsxs("div",{className:t.step2Layout,children:[e.jsx("div",{className:t.mapColumn,children:e.jsx(Dn,{files:_,imageUrl:Se,preview:l,onViewFullSize:n=>{Ge(n||null),We(!0)}})}),e.jsx("div",{className:t.contentColumn,children:e.jsxs("div",{className:t.metadataSectionCard,children:[e.jsx(bs,{files:_,imageType:R,title:q,source:z,eventType:L,epsg:G,countries:Y,centerLon:ae,centerLat:ie,amslM:re,aglM:ce,headingDeg:ue,yawDeg:pe,pitchDeg:he,rollDeg:N,rtkFix:h,stdHM:Ee,stdVM:ze,metadataArray:$e,sources:Rn,types:An,spatialReferences:On,imageTypes:Un,countriesOptions:Wn,onTitleChange:n=>te(n||""),onSourceChange:dt,onEventTypeChange:ut,onEpsgChange:gt,onCountriesChange:pt,onCenterLonChange:mt,onCenterLatChange:ht,onAmslMChange:ft,onAglMChange:xt,onHeadingDegChange:vt,onYawDegChange:jt,onPitchDegChange:_t,onRollDegChange:wt,onRtkFixChange:Ct,onStdHMChange:yt,onStdVMChange:St,onImageTypeChange:en,updateMetadataForImage:It}),e.jsxs("div",{className:t.confirmSection,children:[e.jsx(ln,{name:"delete",variant:"tertiary",onClick:kn,title:"Delete",ariaLabel:"Delete uploaded image",children:e.jsx(cn,{})}),e.jsx(w,{name:"confirm-metadata",onClick:()=>Le("2b"),children:"Next"})]})]})})]}),o==="2b"&&e.jsxs("div",{className:t.step2bLayout,children:[e.jsxs("div",{className:`${t.topRow} ${fe?t.ratingHidden:""}`,children:[e.jsx("div",{className:t.imageSection,children:e.jsx(Dn,{files:_,imageUrl:Se,preview:l,onViewFullSize:n=>{Ge(n||null),We(!0)},currentImageIndex:ct,onGoToPrevious:bt,onGoToNext:Nt,onGoToImage:kt,showCarousel:!0})}),!fe&&e.jsx("div",{className:t.metadataSectionCard,children:e.jsx(Ns,{isPerformanceConfirmed:fe,scores:be,onScoreChange:(n,f)=>fn(u=>({...u,[n]:f})),onConfirmRatings:()=>Ne(!0),onEditRatings:()=>Ne(!1)})})]}),e.jsx("div",{className:t.metadataSectionCard,children:e.jsx(ks,{description:pn,analysis:mn,recommendedActions:hn,onDescriptionChange:n=>Be(n||""),onAnalysisChange:n=>Ue(n||""),onRecommendedActionsChange:n=>He(n||""),onBack:()=>Le("2a"),onDelete:kn,onSubmit:Tt,onEditRatings:()=>Ne(!1),isPerformanceConfirmed:fe})})]})]})}),o===3&&e.jsxs("div",{className:t.successContainer,children:[e.jsx(ee,{level:2,className:t.successHeading,children:"Saved!"}),e.jsx("p",{className:t.successText,children:i.get("contribute")==="true"?"Your contribution has been successfully saved.":"Your caption has been successfully saved."}),e.jsx("div",{className:t.successButton,children:e.jsx(w,{name:"upload-another",onClick:()=>{In()},children:"Upload Another"})})]}),e.jsx(Is,{isOpen:Yn,imageUrl:Se,preview:l,selectedImageData:qn,onClose:()=>{We(!1),Ge(null)}}),e.jsx(Ms,{isOpen:Zn,onClose:()=>xn(!1)}),e.jsx(Ls,{isOpen:Kn,onConfirm:Dt,onCancel:()=>Ve(!1)}),e.jsx(Ts,{isOpen:Jn,onConfirm:Pt,onCancel:()=>ke(!1)}),e.jsx(Ds,{isOpen:Qn,fallbackInfo:Xn,onClose:()=>Ze(!1)}),e.jsx(Ps,{isOpen:et,preprocessingInfo:nt,onClose:()=>Ke(!1)}),e.jsx(Fs,{isOpen:tt,preprocessingFile:Je,isPreprocessing:at,preprocessingProgress:st,onConfirm:Ft,onCancel:Et}),e.jsx(Es,{isOpen:it,unsupportedFile:ot,onClose:()=>Ie(!1)}),e.jsx(Rs,{isOpen:rt,oversizedFile:lt,onClose:()=>ve(!1),onCancel:()=>ve(!1)})]})}const zs="_helpContainer_1wavj_1",As="_helpSection_1wavj_13",$s="_sectionHeader_1wavj_49",Os="_sectionTitle_1wavj_91",Bs="_sectionContent_1wavj_105",Us="_guidelinesList_1wavj_119",Hs="_buttonContainer_1wavj_181",I={helpContainer:zs,helpSection:As,sectionHeader:$s,sectionTitle:Os,sectionContent:Bs,guidelinesList:Us,buttonContainer:Hs};function Ws(){const i=dn(),{setShowReferenceExamples:s}=Ss(),o=()=>{i("/upload")},p=()=>{s(!0),i("/explore")},c=()=>{i("/analytics?view=crisis_maps")};return e.jsx(rn,{className:"py-10",children:e.jsx("div",{className:I.helpContainer,children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:I.helpSection,children:[e.jsx("div",{className:I.sectionHeader,children:e.jsx(ee,{level:3,className:I.sectionTitle,children:"Introduction"})}),e.jsx("div",{className:I.sectionContent,children:"In collaboration with the IFRC, PromptAid Vision is a tool that generates textual descriptions of crisis maps/crisis drone images utiliing Visual language models. This prototype is for collecting data for the fine-tuning of our own models. We aim to utilize AI tools to support national societies with rapid decision making during emergencies."}),e.jsx("div",{className:I.buttonContainer,children:e.jsx(w,{name:"upload-now",variant:"secondary",onClick:o,children:"Upload now →"})})]}),e.jsxs("div",{className:I.helpSection,children:[e.jsx("div",{className:I.sectionHeader,children:e.jsx(ee,{level:3,className:I.sectionTitle,children:"Guidelines"})}),e.jsxs("div",{className:I.sectionContent,children:["To make the process smoother, please follow the guidelines below:",e.jsxs("ul",{className:I.guidelinesList,children:[e.jsx("li",{children:"Avoid uploading images that are not crisis maps/crisis drone images."}),e.jsx("li",{children:"Confirm the image details prior to modifying the description."}),e.jsx("li",{children:"Before the modification, please read the description generated and provide a rating via the rating sliders."}),e.jsx("li",{children:'Click the "Submit" button to save the description.'})]})]}),e.jsx("div",{className:I.buttonContainer,children:e.jsx(w,{name:"see-examples",variant:"secondary",onClick:p,children:"See examples →"})})]}),e.jsxs("div",{className:I.helpSection,children:[e.jsx("div",{className:I.sectionHeader,children:e.jsx(ee,{level:3,className:I.sectionTitle,children:"VLMs"})}),e.jsx("div",{className:I.sectionContent,children:"PromptAid Vision uses a variety of Visual Language Models (VLMs). A random VLM is selected for each upload. Therefore feel free to delete and reupload. You can view performance details here:"}),e.jsx("div",{className:I.buttonContainer,children:e.jsx(w,{name:"view-vlm-details",variant:"secondary",onClick:c,children:"View VLM details →"})})]}),e.jsxs("div",{className:I.helpSection,children:[e.jsx("div",{className:I.sectionHeader,children:e.jsx(ee,{level:3,className:I.sectionTitle,children:"Dataset"})}),e.jsx("div",{className:I.sectionContent,children:"All users are able to export the dataset. You could apply filters when exporting, and it have the option to organize based on model fine-tuning formats."}),e.jsx("div",{className:I.buttonContainer,children:e.jsx(w,{name:"export-dataset",variant:"secondary",onClick:()=>{s(!1),i("/explore"),setTimeout(()=>{const d=document.querySelector('[name="export-dataset"]');d&&d.click()},100)},children:"Export dataset →"})})]}),e.jsxs("div",{className:I.helpSection,children:[e.jsx("div",{className:I.sectionHeader,children:e.jsx(ee,{level:3,className:I.sectionTitle,children:"Contact us"})}),e.jsx("div",{className:I.sectionContent,children:"Need help or have questions about PromptAid Vision? Our team is here to support you."}),e.jsx("div",{className:I.buttonContainer,children:e.jsx(w,{name:"contact-support",variant:"secondary",disabled:!0,children:"Get in touch →"})})]})]})})})}const Gs=a.createContext(void 0),Vs=({children:i})=>{const[s,o]=a.useState(!1),[p,c]=a.useState(!0),d=async()=>{const x=localStorage.getItem("adminToken");if(!x){o(!1),c(!1);return}try{(await fetch("/api/admin/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`}})).ok?o(!0):(localStorage.removeItem("adminToken"),o(!1))}catch(l){console.error("Error verifying admin token:",l),localStorage.removeItem("adminToken"),o(!1)}finally{c(!1)}},j=async x=>{try{const l=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:x})});if(l.ok){const b=await l.json();return localStorage.setItem("adminToken",b.access_token),o(!0),!0}else return!1}catch(l){return console.error("Login error:",l),!1}},C=()=>{localStorage.removeItem("adminToken"),o(!1)};a.useEffect(()=>{d()},[]);const S={isAuthenticated:s,isLoading:p,login:j,logout:C,verifyToken:d};return e.jsx(Gs.Provider,{value:S,children:i})},Ys=a.lazy(()=>Pe(()=>import("./index-g8hSi49F.js"),__vite__mapDeps([0,1,2,3,4,5]))),qs=a.lazy(()=>Pe(()=>import("./index-BKlKgxqV.js"),__vite__mapDeps([6,1,2,3,4,7,8,9,10]))),Zs=a.lazy(()=>Pe(()=>import("./AdminPage-BwkoCIN3.js"),__vite__mapDeps([11,1,2,7,3,4,12]))),Ks=a.lazy(()=>Pe(()=>import("./index-b9cDMBDN.js"),__vite__mapDeps([13,1,2,3,4,7,8,9,14]))),Js=$t([{element:e.jsx(ua,{}),children:[{path:"/",element:e.jsx(Pn,{})},{path:"/upload",element:e.jsx(Pn,{})},{path:"/analytics",element:e.jsx(a.Suspense,{fallback:e.jsx("div",{children:"Loading Analytics..."}),children:e.jsx(Ys,{})})},{path:"/explore",element:e.jsx(a.Suspense,{fallback:e.jsx("div",{children:"Loading Explore..."}),children:e.jsx(qs,{})})},{path:"/help",element:e.jsx(Ws,{})},{path:"/admin",element:e.jsx(a.Suspense,{fallback:e.jsx("div",{children:"Loading Admin..."}),children:e.jsx(Zs,{})})},{path:"/map/:mapId",element:e.jsx(a.Suspense,{fallback:e.jsx("div",{children:"Loading Map Details..."}),children:e.jsx(Ks,{})})}]}]);function Qs(){const[i,s]=a.useState([]),o=a.useCallback(C=>{s(S=>aa([...S,C],x=>x.name)??S)},[s]),p=a.useCallback(C=>{s(S=>{const x=S.findIndex(b=>b.name===C);if(x===-1)return S;const l=[...S];return l.splice(x,1),l})},[s]),c=a.useCallback((C,S)=>{s(x=>{const l=x.findIndex(M=>M.name===C);if(l===-1)return x;const b=[...x];return b[l]={...b[l],...S},b})},[s]),d=a.useMemo(()=>({alerts:i,addAlert:o,removeAlert:p,updateAlert:c}),[i,o,p,c]),j=a.useMemo(()=>({languageNamespaceStatus:{},setLanguageNamespaceStatus:()=>{},currentLanguage:"en",setCurrentLanguage:()=>{},strings:{},setStrings:()=>{},registerNamespace:()=>{}}),[]);return e.jsx(Xt.Provider,{value:d,children:e.jsx(ea.Provider,{value:j,children:e.jsx(Vs,{children:e.jsx(ys,{children:e.jsx(Ot,{router:Js})})})})})}function Xs(){return e.jsx(Qs,{})}Bt.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Xs,{})}));export{Gs as A,Is as F,Pe as _,Ss as u};
