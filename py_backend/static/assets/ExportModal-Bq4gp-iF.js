import{r as n,D as O,j as e,z as c,n as o,O as B,J as b,P as G,_ as M,L as A,S as P}from"./index-Dym8TuvV.js";const q=({title:m,titleId:u,...x})=>n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em","aria-labelledby":u},x),m?n.createElement("title",{id:u},m):null,n.createElement("g",{clipPath:"url(#filter-line_svg__a)"},n.createElement("path",{d:"M9 13.5 4 6H3V4h18v2h-1l-5 7.5V22H9v-8.5ZM6.404 6 11 12.894V20h2v-7.106L17.596 6H6.404Z"})),n.createElement("defs",null,n.createElement("clipPath",{id:"filter-line_svg__a"},n.createElement("path",{d:"M0 0h24v24H0z"}))));function ie({sources:m,types:u,regions:x,countries:T,imageTypes:z,isLoadingFilters:s=!1}){const[h,_]=n.useState(!1),[S,p]=n.useState(""),{search:I,setSearch:g,srcFilter:E,setSrcFilter:v,catFilter:j,setCatFilter:f,regionFilter:y,setRegionFilter:C,countryFilter:k,setCountryFilter:N,imageTypeFilter:F,setImageTypeFilter:w,uploadTypeFilter:d,setUploadTypeFilter:a,generatedMethodFilter:r,setGeneratedMethodFilter:i,clearAllFilters:W}=O();return n.useEffect(()=>{p(I)},[I]),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(c,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:e.jsx(o,{name:"toggle-filters",variant:"secondary",onClick:()=>_(!h),className:"whitespace-nowrap",title:h?"Hide Filters":"Show Filters",children:e.jsx(q,{className:"w-4 h-4"})})}),e.jsx(c,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2 flex-1 min-w-[300px]",children:e.jsx(B,{name:"search",placeholder:"Search",value:S,onChange:l=>p(l||""),onKeyDown:l=>{l.key==="Enter"&&g(S)}})}),e.jsx(c,{withInternalPadding:!0,className:"bg-white/20 backdrop-blur-sm rounded-md p-2",children:e.jsx(o,{name:"clear-filters",variant:"secondary",onClick:W,children:"Clear Filters"})})]}),h&&e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-md p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(c,{withInternalPadding:!0,className:"p-2",children:e.jsx(b,{name:"source",placeholder:s?"Loading...":"All Sources",options:m,value:E||null,onChange:l=>v(l||""),keySelector:l=>l.s_code,labelSelector:l=>l.label,required:!1,disabled:s})}),e.jsx(c,{withInternalPadding:!0,className:"p-2",children:e.jsx(b,{name:"category",placeholder:s?"Loading...":"All Categories",options:u,value:j||null,onChange:l=>f(l||""),keySelector:l=>l.t_code,labelSelector:l=>l.label,required:!1,disabled:s})}),e.jsx(c,{withInternalPadding:!0,className:"p-2",children:e.jsx(b,{name:"region",placeholder:s?"Loading...":"All Regions",options:x,value:y||null,onChange:l=>C(l||""),keySelector:l=>l.r_code,labelSelector:l=>l.label,required:!1,disabled:s})}),e.jsx(c,{withInternalPadding:!0,className:"p-2",children:e.jsx(G,{name:"country",placeholder:s?"Loading...":"All Countries",options:T,value:k?[k]:[],onChange:l=>N(l[0]||""),keySelector:l=>l.c_code,labelSelector:l=>l.label,disabled:s})}),e.jsx(c,{withInternalPadding:!0,className:"p-2",children:e.jsx(b,{name:"imageType",placeholder:s?"Loading...":"All Image Types",options:z,value:F||null,onChange:l=>w(l||""),keySelector:l=>l.image_type,labelSelector:l=>l.label,required:!1,disabled:s})}),e.jsx(c,{withInternalPadding:!0,className:"p-2",children:e.jsx(b,{name:"uploadType",placeholder:"All Upload Types",options:[{key:"single",label:"Single Upload"},{key:"multiple",label:"Multiple Upload"}],value:d||null,onChange:l=>a(l||""),keySelector:l=>l.key,labelSelector:l=>l.label,required:!1,disabled:!1})}),e.jsx(c,{withInternalPadding:!0,className:"p-2",children:e.jsx(b,{name:"generatedMethod",placeholder:"All Generated Methods",options:[{key:"manual",label:"Manual"},{key:"generated",label:"Generated"}],value:r||null,onChange:l=>i(l||""),keySelector:l=>l.key,labelSelector:l=>l.label,required:!1,disabled:!1})})]})})]})}const V="_fullSizeModalOverlay_cyz3b_1",D="_fullSizeModalContent_cyz3b_29",H="_ratingWarningContent_cyz3b_53",R="_ratingWarningTitle_cyz3b_65",U="_exportModeSection_cyz3b_133",Y="_splitConfigSection_cyz3b_143",Z="_splitConfigTitle_cyz3b_153",$="_splitInputsContainer_cyz3b_167",J="_splitInputGroup_cyz3b_183",K="_splitInputLabel_cyz3b_197",Q="_splitInput_cyz3b_167",X="_splitTotal_cyz3b_247",L="_splitTotalError_cyz3b_261",ee="_checkboxesContainer_cyz3b_271",le="_ratingWarningButtons_cyz3b_289",te="_singleExportMessage_cyz3b_309",ae="_navigateButtonContainer_cyz3b_333",se="_loadingOverlay_cyz3b_349",t={fullSizeModalOverlay:V,fullSizeModalContent:D,ratingWarningContent:H,ratingWarningTitle:R,exportModeSection:U,splitConfigSection:Y,splitConfigTitle:Z,splitInputsContainer:$,splitInputGroup:J,splitInputLabel:K,splitInput:Q,splitTotal:X,splitTotalError:L,checkboxesContainer:ee,ratingWarningButtons:le,singleExportMessage:te,navigateButtonContainer:ae,loadingOverlay:se};function re({isOpen:m,onClose:u,onExport:x,crisisMapsCount:T,droneImagesCount:z,isLoading:s=!1,exportSuccess:h=!1,variant:_="bulk",onNavigateAndExport:S}){const[p,I]=n.useState("standard"),[g,E]=n.useState(80),[v,j]=n.useState(10),[f,y]=n.useState(10),[C,k]=n.useState(!0),[N,F]=n.useState(!0),w=()=>{if(_==="single"){x(p,["crisis_map","drone_image"]);return}if(!C&&!N){alert("Please select at least one image type to export.");return}const a=[];C&&a.push("crisis_map"),N&&a.push("drone_image"),x(p,a)},d=()=>{u()};return m?_==="single"?e.jsx("div",{className:t.fullSizeModalOverlay,onClick:d,children:e.jsxs("div",{className:t.fullSizeModalContent,onClick:a=>a.stopPropagation(),children:[s&&e.jsx("div",{className:t.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(M,{className:"text-ifrcRed"}),e.jsx("div",{className:"text-lg font-medium",children:"Exporting..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"This might take a few seconds"})]})}),h&&e.jsx("div",{className:t.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"Export Successful!"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your dataset has been downloaded"}),e.jsx(o,{name:"close-export-success",onClick:d,className:"mt-4",children:"Close"})]})}),e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"Export Single Item"}),e.jsxs("div",{className:t.singleExportMessage,children:[e.jsx("p",{children:"This only exports the 1 item currently on display."}),e.jsx("p",{children:'You may export the entire dataset from the "list view" here:'})]}),e.jsx("div",{className:t.navigateButtonContainer,children:e.jsx(o,{name:"navigate-to-list",variant:"secondary",onClick:S,children:"Navigate to List View"})}),e.jsxs("div",{className:t.ratingWarningButtons,children:[e.jsx(o,{name:"continue-export",onClick:w,disabled:s,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"text-white"}),"Exporting..."]}):"Continue"}),e.jsx(o,{name:"cancel-export",variant:"tertiary",onClick:d,disabled:s,children:"Cancel"})]})]})]})}):e.jsx("div",{className:t.fullSizeModalOverlay,onClick:d,children:e.jsxs("div",{className:t.fullSizeModalContent,onClick:a=>a.stopPropagation(),children:[s&&e.jsx("div",{className:t.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(M,{className:"text-ifrcRed"}),e.jsx("div",{className:"text-lg font-medium",children:"Exporting..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"This might take a few seconds"})]})}),h&&e.jsx("div",{className:t.loadingOverlay,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"Export Successful!"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your dataset has been downloaded"}),e.jsx(o,{name:"close-export-success",onClick:d,className:"mt-4",children:"Close"})]})}),e.jsxs("div",{className:t.ratingWarningContent,children:[e.jsx("h3",{className:t.ratingWarningTitle,children:"Export Dataset"}),e.jsx("div",{className:t.exportModeSection,children:e.jsx(A,{name:"export-mode",value:p,onChange:a=>{(a==="standard"||a==="fine-tuning")&&I(a)},options:[{key:"standard",label:"Standard"},{key:"fine-tuning",label:"Fine-tuning"}],keySelector:a=>a.key,labelSelector:a=>a.label,disabled:s})}),p==="fine-tuning"&&e.jsxs("div",{className:t.splitConfigSection,children:[e.jsx("div",{className:t.splitConfigTitle,children:"Dataset Split Configuration"}),e.jsxs("div",{className:t.splitInputsContainer,children:[e.jsxs("div",{className:t.splitInputGroup,children:[e.jsx("label",{htmlFor:"train-split",className:t.splitInputLabel,children:"Train (%)"}),e.jsx("input",{id:"train-split",type:"number",min:"0",max:"100",value:g,onChange:a=>{const r=parseInt(a.target.value)||0,i=100-r;i>=0&&(E(r),v+f>i&&(j(Math.floor(i/2)),y(i-Math.floor(i/2))))},className:t.splitInput,disabled:s})]}),e.jsxs("div",{className:t.splitInputGroup,children:[e.jsx("label",{htmlFor:"test-split",className:t.splitInputLabel,children:"Test (%)"}),e.jsx("input",{id:"test-split",type:"number",min:"0",max:"100",value:v,onChange:a=>{const r=parseInt(a.target.value)||0,i=100-g-r;i>=0&&(j(r),y(i))},className:t.splitInput,disabled:s})]}),e.jsxs("div",{className:t.splitInputGroup,children:[e.jsx("label",{htmlFor:"val-split",className:t.splitInputLabel,children:"Val (%)"}),e.jsx("input",{id:"val-split",type:"number",min:"0",max:"100",value:f,onChange:a=>{const r=parseInt(a.target.value)||0,i=100-g-r;i>=0&&(y(r),j(i))},className:t.splitInput,disabled:s})]})]}),g+v+f!==100&&e.jsx("div",{className:t.splitTotal,children:e.jsx("span",{className:t.splitTotalError,children:"Must equal 100%"})})]}),e.jsxs("div",{className:t.checkboxesContainer,children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(P,{name:"crisis-maps",label:`Crisis Maps (${T} images)`,value:C,onChange:a=>k(a),disabled:s})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(P,{name:"drone-images",label:`Drone Images (${z} images)`,value:N,onChange:a=>F(a),disabled:s})})]}),e.jsxs("div",{className:t.ratingWarningButtons,children:[e.jsx(o,{name:"confirm-export",onClick:w,disabled:s,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"text-white"}),"Exporting..."]}):"Export Selected"}),e.jsx(o,{name:"cancel-export",variant:"tertiary",onClick:d,disabled:s,children:"Cancel"})]})]})]})}):null}export{re as E,ie as F};
